var Pu=Object.defineProperty,_u=Object.defineProperties;var Mu=Object.getOwnPropertyDescriptors;var lu=Object.getOwnPropertySymbols;var Tu=Object.prototype.hasOwnProperty,Su=Object.prototype.propertyIsEnumerable;var xu=(t,e,n)=>e in t?Pu(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,b=(t,e)=>{for(var n in e||(e={}))Tu.call(e,n)&&xu(t,n,e[n]);if(lu)for(var n of lu(e))Su.call(e,n)&&xu(t,n,e[n]);return t},$=(t,e)=>_u(t,Mu(e));var wu=(t,e)=>{var n={};for(var s in t)Tu.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&lu)for(var s of lu(t))e.indexOf(s)<0&&Su.call(t,s)&&(n[s]=t[s]);return n};var U=(t,e,n)=>(xu(t,typeof e!="symbol"?e+"":e,n),n);import{s as ju,j as u,O as Cu,d as Gu,a as Hu,b as zu,c as Vu,u as uu,L as z,e as Du,A as Ku,C as Eu,f as r,T as Xu,g as d,B as p,h as _,I as vu,i as Zu,k as qu,D as Ju,l as Qu,r as i,m as V,n as cu,o as iu,p as O,F as k,q as m,t as ku,v as eu,w as tu,x as J,y as K,z as nu,E as bu,M as du,S as gu,G as Yu,H as Au,J as Bu,K as u4,N as e4,P as t4,Q as n4,R as s4,U as r4,V as a4,W as i4,X as o4,Y as l4,Z as c4,_ as M,$ as d4,a0 as p4,a1 as h4,a2 as m4,a3 as f4,a4 as x4,a5 as C4,a6 as E4}from"./vendor.1bbd0653.js";const b4=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerpolicy&&(o.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?o.credentials="include":a.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}};b4();const g4=ju("main")({flexGrow:1,margin:10}),y4=()=>u(g4,{children:u(Cu,{})}),pu="/";var Fu=[{label:"\u0413\u043B\u0430\u0432\u043D\u0430\u044F",path:`${pu}`,icon:u(Gu,{color:"primary"})},{label:"\u041F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u044B",path:`${pu}tasks`,icon:u(Hu,{color:"primary"})},{label:"\u0417\u0430\u0434\u0430\u0447\u0438",path:`${pu}works`,icon:u(zu,{color:"primary"})},{label:"\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438",path:`${pu}settings`,icon:u(Vu,{color:"primary"})}];const Wu="Pulsar",T4=({toggleOpen:t})=>{const e=uu(),n=Fu.map(s=>u(z,{button:!0,onClick:()=>e(s.path,{replace:!0}),children:u(Du,{primary:s.label})},s.label));return u(Ku,{position:"fixed",children:u(Eu,{maxWidth:"xl",children:r(Xu,{disableGutters:!0,children:[u(d,{variant:"h6",noWrap:!0,component:"h1",sx:au.logoSm,children:Wu}),u(p,{sx:au.menu,children:u(_,{component:"nav",sx:au.nav,children:n})}),u(p,{sx:au.icon,children:u(vu,{size:"large","aria-label":"open menu","aria-controls":"menu-appbar","aria-haspopup":"true",color:"inherit",onClick:t,sx:au.iconButton,children:u(Zu,{})})}),u(d,{variant:"h6",noWrap:!0,component:"h1",sx:au.logoXs,children:Wu})]})})})},au={logoSm:{mr:2,display:{xs:"none",sm:"flex"}},logoXs:{flexGrow:1,justifyContent:"flex-end",display:{xs:"flex",sm:"none"}},menu:{flexGrow:1,justifyContent:"flex-end",display:{xs:"none",sm:"flex"}},nav:{display:"flex",flexDirection:"row"},iconButton:{padding:"20px"},icon:{display:{xs:"flex",sm:"none"}}},S4=({open:t,toggleOpen:e})=>{const n=uu(),s=o=>{n(o,{replace:!0}),e()},a=Fu.map(o=>r(z,{button:!0,onClick:()=>s(o.path),children:[u(qu,{children:o.icon}),u(Du,{primary:o.label})]},o.label));return r(Ju,{sx:Iu.drawer,open:t,onClose:e,children:[r(p,{sx:{display:{xs:"flex",sm:"none"}},children:[u(d,{children:"Pulsar"}),u(vu,{size:"large","aria-label":"open menu","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:e,sx:Iu.closeButton,children:u(Qu,{})})]}),u(_,{component:"nav",children:a})]})},Iu={drawer:{width:300,"& .MuiDrawer-paper":{width:300,boxSizing:"border-box",top:"auto",padding:"10px 10px"}},closeButton:{color:"text.secondary"}},w4=t=>{const[e,n]=i.exports.useState(!!t);return[e,()=>{n(()=>!e)}]},D4=({children:t})=>{const[e,n]=w4(!1);return r(Eu,{maxWidth:"100vw",disableGutters:!0,sx:$u.container,children:[u(T4,{toggleOpen:n}),r(Eu,{sx:$u.content,disableGutters:!0,children:[u(S4,{open:e,toggleOpen:n}),t]})]})},$u={container:{display:"flex",flexDirection:"column",minHeight:"100vh"},content:{display:"flex",flexGrow:1,mt:8}},j=`${location.protocol}//${location.hostname}`;class v4{async fetch(e){return(await V.get(`${j}/${e}`)).data}async rotateCW(e,n){return(await V.get(`${j}/${e}/${n}`)).data}async rotateCCW(e,n){return(await V.get(`${j}/${e}/${n}`)).data}async fetchById(e,n){return(await V.get(`${j}/${e}/${n}`)).data}async create(e,n){return(await V.post(`${j}/${e}`,n)).data}async remove(e,n){return(await V.delete(`${j}/${e}/${n}`)).data}async update(e,n){return(await V.put(`${j}/${e}/${n.id}`,n)).data}async repair(e){return await V.post(`${j}/${e}`)}async backup(e){await V({url:`${j}/${e}`,method:"GET",responseType:"blob"}).then(n=>{const s=n.headers["content-type"],a=new Blob([n.data],{type:s,encoding:"UTF-8"}),o=document.createElement("a"),l=n.headers["content-disposition"].split("filename=")[1].replace(/"/g,"");o.href=window.URL.createObjectURL(a),o.download=l,o.click()})}async restore(e,n){const s=new FormData;return s.append("restore",n),console.log(`${j}/${e}`),await V.post(`${j}/${e}`,s,{headers:{"Content-Type":"multipart/form-data"}})}}var w=new v4;class k4{constructor(){U(this,"actionTypes",[]);U(this,"workTypes",[]);U(this,"statusTypes",[]);U(this,"WORK",{});U(this,"STATUS",{});U(this,"ACTION",{});cu(this),this.fetch()}fill(e){this.actionTypes=e.actionTypes,this.workTypes=e.workTypes,this.statusTypes=e.statusTypes,this.WORK=e.WORK,this.STATUS=e.STATUS,this.ACTION=e.ACTION}async fetch(){const e=await w.fetch("api/dictonary");this.fill(e.result)}getStatus(e){return this.statusTypes.find(n=>n.id===e)}}const C=new k4;class A4{constructor(){U(this,"settingList",[]);U(this,"SETTING",{});U(this,"serverTime","");cu(this)}setServerTime(e){this.serverTime=iu(e,"dd-MM-yyyy - HH:mm")}fill(e){this.settingList=e}fillSETTING(e){this.SETTING=e}async rotateCW(e){return(await w.rotateCW("api/settings/rotateCW",e)).data}async rotateCCW(e){return(await w.rotateCW("api/settings/rotateCCW",e)).data}async fetch(){const e=await w.fetch("api/settings");this.fill(e.settings),this.fillSETTING(e.SETTING),await w.fetch("api/settings/serverTime")}async update(e){await w.update("api/settings",e);const n=[...this.settingList],s=n.findIndex(a=>a.id===e.id);n[s]=b({},e),this.fill(n)}async updateServer(){setTimeout(()=>{window.close()},2e3),await w.fetch("api/settings/updateServer")}async backup(){await w.backup("api/settings/backup")}async repair(){setTimeout(()=>{window.close()},2e3),await w.repair("api/settings/repair")}async restore(e){return setTimeout(()=>{window.close()},2e3),await w.restore("api/settings/restore",e)}async shutdown(){setTimeout(()=>{window.close()},2e3),await w.fetch("api/settings/shutdown")}async restart(){setTimeout(()=>{window.close()},2e3),await w.fetch("api/settings/restart")}async calibrateAzimuth(e){return await w.fetch(`api/works/calibrateAzimuth?time=${e}`)}async calibrateSlope(e){return await w.fetch(`api/works/calibrateSlope?time=${e}`)}}const g=new A4;class B4{constructor(){U(this,"taskList",[]);cu(this)}fill(e){this.taskList=e}async fetch(){const e=await w.fetch("api/tasks");this.fill(e.result)}async fetchById(e){return(await w.fetchById("api/tasks",e)).result}async remove(e){const n=await w.remove("api/tasks",e.id),s=this.taskList.filter(a=>a.id!==e.id);return this.fill(s),n.result}async create(e){const s=(await w.create("api/tasks",e)).result;this.fill([...this.taskList,s])}async update(e){const n=await w.update("api/tasks",e);let s=this.taskList.findIndex(a=>a.id===e.id);return this.taskList[s]=b({},e),n.result}}const X=new B4;class F4{constructor(){U(this,"workList",[]);U(this,"currentWork",null);cu(this)}fill(e){this.workList=e}fillCurrentWork(e){this.currentWork=e}async fetch(){const e=await w.fetch("api/works");this.fill(e.result)}async fetchCurrentWork(){const e=await w.fetch("api/works/currentWork");this.fillCurrentWork(e.result)}async create(e){const s=(await w.create("api/works",e)).result;this.fill([...this.workList,s])}async stopCurrent(){return await w.fetch("api/works/stopCurrent")}async remove(e){const n=await w.remove("api/works",e.id),s=this.workList.filter(a=>a.id!==e.id);return this.fill(s),n.result}async clear(){this.workList.forEach(async e=>{(e.status.id===C.STATUS.STATUS_DONE||e.status.id===C.STATUS.STATUS_EXPIRED||e.status.id===C.STATUS.STATUS_STOPPED)&&await w.remove("api/works",e.id)})}}const v=new F4,W4=()=>{var o;i.exports.useEffect(()=>{v.fetchCurrentWork()},[]);const t=uu(),e=i.exports.useCallback(()=>{t("/works/current-work")},[]),n=i.exports.useCallback(()=>{v.stopCurrent()},[]);let s=[];const a=(o=v.currentWork)==null?void 0:o.work;return a&&(s=a.details.filter(l=>l.status.id===C.STATUS.STATUS_RUN).map(l=>u(z,{children:l.type.name},l.id))),r(k,{children:[r(p,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",p:1,bgcolor:"#cdcdcd"},children:[u(d,{variant:"span",children:"\u0422\u0435\u043A\u0443\u0449\u0435\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435"}),s.length===0&&u(d,{variant:"span",children:"\u043E\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442"}),s.length!==0&&u(_,{children:s})]}),r(p,{sx:{display:"flex",bgcolor:"#cdcdcd"},children:[u(m,{variant:"contained",color:"primary",onClick:e,sx:{m:1},children:"\u041F\u043E\u0434\u0440\u043E\u0431\u043D\u0435\u0435"}),u(m,{variant:"contained",color:"primary",onClick:n,sx:{m:1},children:"\u041E\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u044C"})]})]})};var I4=O(W4);const $4=()=>{const t=v.workList.filter(e=>e.status.id===C.STATUS.STATUS_RUN).map(e=>u(z,{children:e.item.name},e.id));return r(p,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",bgcolor:"#cdcdcd",p:1,mb:2},children:[u(d,{variant:"span",children:"\u0422\u0435\u043A\u0443\u0449\u0430\u044F \u0437\u0430\u0434\u0430\u0447\u0430 "}),t.length===0&&u(d,{variant:"span",children:"\u043E\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442"}),t.length!==0&&u(_,{children:t})]})};var O4=O($4);const L4=()=>{const t=v.workList.filter(e=>e.status.id===C.STATUS.STATUS_WAIT).map(e=>{const n=iu(e.startTime,"dd-MM-yyyy - HH:mm");return r(z,{sx:{flexWrap:"wrap",justifyContent:"space-between"},children:[u(p,{variant:"div",sx:{width:"70%"},children:e.item.name}),u(p,{variant:"div",sx:{color:"blue"},children:n})]},e.id)});return r(p,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",bgcolor:"#cdcdcd",p:1,my:2,flexWrap:"wrap"},children:[u(d,{variant:"span",children:"\u0417\u0430\u043F\u043B\u0430\u043D\u0438\u0440\u043E\u0432\u0430\u043D\u043D\u044B\u0435"}),t.length===0&&u(d,{variant:"span",children:"\u043E\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044E\u0442"}),t.length!==0&&u(_,{sx:{width:"100%"},children:t})]})};var R4=O(L4);const N4=()=>(i.exports.useEffect(()=>{v.fetch()},[]),r(p,{sx:{borderWidth:"1px",borderStyle:"solid",borderColor:"black",borderRadius:"5px",minHeight:"98%",p:.5,m:.5},children:[u(d,{children:"\u0418\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044F \u043E \u0437\u0430\u0434\u0430\u043D\u0438\u044F\u0445"}),u(R4,{}),u(O4,{}),u(I4,{})]})),su=t=>{const{open:e,onCloseDialog:n,children:s}=t;return u(ku,{open:e,onClose:n,sx:{"& .MuiPaper-root":{width:{xs:"98%",sm:"50%"}}},children:s})},U4=({setting:t,onCancel:e,onSubmit:n})=>{const[s,a]=i.exports.useState(b({},t)),o=c=>{let E=c.target.value;s.id!==g.SETTING.SETTING_CURRENT_SLOPE&&(E=E.replace(/-/g,"")),a($(b({},s),{value:E}))},l=()=>{const c=b({},s);return c.type==="number"&&(c.value=Number((+c.value).toFixed(3))),b({},c)};return r(k,{children:[u(eu,{children:u(d,{children:"\u0417\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u043F\u0430\u0440\u0430\u043C\u0435\u0442\u0440\u0430"})}),u(tu,{children:r(p,{sx:{display:"flex",flexDirection:"column"},children:[" ",s.type==="number"?u(J,{children:u(K,{autoFocus:!0,sx:{m:1},label:"\u0417\u043D\u0430\u0447\u0435\u043D\u0438\u0435",type:"number",inputProps:{max:350,min:0,step:.1},value:s.value,onChange:o,InputLabelProps:{shrink:!0}})}):u(J,{children:u(K,{autoFocus:!0,sx:{m:1},label:"\u0417\u043D\u0430\u0447\u0435\u043D\u0438\u0435",value:s.value,onChange:o,InputLabelProps:{shrink:!0}})})]})}),r(nu,{children:[u(m,{onClick:e,children:"\u041E\u0442\u043C\u0435\u043D\u0430"}),u(m,{onClick:()=>n(l()),children:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C"})]})]})};var P4=O(U4);const Ou=({setting:t,onEdit:e,editable:n=!0})=>{const[s,a]=i.exports.useState(!1),o=()=>{a(!0)},l=()=>{a(!1)},c=h=>{e(b({},h)),l()},E=h=>h==="0"?"\u043B\u0435\u0432\u044B\u0439":"\u043F\u0440\u0430\u0432\u044B\u0439";return r(k,{children:[r(z,{sx:{justifyContent:"space-between",wordWrap:"wrap",bgcolor:"#f9f9f9"},children:[u(d,{sx:{width:"40%"},children:t.name}),r(p,{sx:{width:"60%",display:"flex",justifyContent:"space-between"},children:[u(d,{sx:{width:"50%",display:"flex",justifyContent:"center",fontSize:"1.5rem",color:"blue"},children:t.id===9?E(t.value):t.value}),n&&u(m,{onClick:o,children:"\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C"})]})]},t.id),u(su,{open:s,onCloseDialog:l,children:u(P4,{onCancel:l,onSubmit:c,setting:t})})]})},_4=()=>{i.exports.useEffect(()=>{g.fetch()},[]);const t=g.settingList?g.settingList.filter(e=>e.id!==g.SETTING.SETTING_AZIMUTH_SPEED&&e.id!==g.SETTING.SETTING_SLOPE_SPEED).map(e=>u(Ou,{setting:e,editable:!1},e.id)):null;return r(p,{sx:{borderWidth:"1px",borderStyle:"solid",borderColor:"black",borderRadius:"5px",minHeight:"98%",p:.5,m:.5},children:[u(d,{children:"\u0418\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044F \u043E\u0431 \u0443\u0441\u0442\u0440\u043E\u0439\u0441\u0442\u0432\u0435"}),r(p,{sx:{display:"flex",justifyContent:"space-between",px:2,mt:2,color:"blue"},children:[u(d,{variant:"div",children:"\u0412\u0440\u0435\u043C\u044F \u0441\u0435\u0440\u0432\u0435\u0440\u0430"}),u(d,{variant:"div",children:g.serverTime})]}),u(_,{sx:{mb:2},children:t})]})};var M4=O(_4);const Lu=()=>r(k,{children:[u(d,{sx:{color:"red",border:"2px solid red",borderRadius:1,fontWeight:"bold",width:"80%",m:"10px auto",p:1},children:"\u0412\u041D\u0418\u041C\u0410\u041D\u0418\u0415!!! \u041F\u0435\u0440\u0435\u0434 \u0440\u0430\u0431\u043E\u0442\u043E\u0439 \u043F\u0440\u043E\u0432\u0435\u0440\u044C\u0442\u0435 \u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u043E\u0432\u0442\u044C \u0432\u044B\u0441\u0442\u0430\u0432\u043B\u0435\u043D\u043D\u043E\u0433\u043E \u0430\u0437\u0438\u043C\u0443\u0442\u0430 \u0438 \u043D\u0430\u043A\u043B\u043E\u043D\u0430!!!"}),r(p,{sx:{bgcolor:"#f9f9f9",p:1,minHeight:"85%",display:"flex",flexWrap:"wrap",justifyContent:"center"},children:[u(p,{sx:{padding:1,width:{xs:"100%",sm:"45%"},minHeight:"95%"},children:u(N4,{})}),u(p,{sx:{padding:1,width:{xs:"100%",sm:"45%"},minHeight:"95%"},children:u(M4,{})})]})]}),j4=()=>u(k,{children:u(Cu,{})}),G4=()=>u(k,{children:u(Cu,{})}),H4=({task:t,onSubmit:e,onCancel:n})=>{const s=i.exports.useMemo(()=>C.workTypes.find(x=>x.id===C.WORK.WORK_PROGRAMM),[]),a=i.exports.useMemo(()=>C.statusTypes.find(x=>x.id===C.STATUS.STATUS_RUN),[]),o=i.exports.useMemo(()=>({type:s,status:a,item:t,startTime:null,details:[]}),[]),[l,c]=i.exports.useState(o),[E,h]=i.exports.useState(a),[D,A]=i.exports.useState(iu(new Date,"yyyy-MM-dd'T'HH:mm",{locale:bu})),B=x=>{const F=iu(x,"yyyy-MM-dd'T'HH:mm",{locale:bu}),W=Au(Bu(F));A(F),c($(b({},l),{startTime:W}))},f=x=>{const F=x.target.value;let W=null;h(F),F.id===C.STATUS.STATUS_WAIT&&(W=Au(Bu(D))),c($(b({},l),{status:F,startTime:W}))},T=i.exports.useMemo(()=>C.statusTypes.map(x=>(x.id===C.STATUS.STATUS_RUN||x.id===C.STATUS.STATUS_WAIT)&&u(du,{value:x,children:x.name},x.id)),[]);return r(k,{children:[u(eu,{children:u(d,{children:"\u0417\u0430\u0434\u0430\u043D\u0438\u0435"})}),u(tu,{children:r(p,{sx:{display:"flex",flexDirection:"column"},children:[u(J,{fullWidth:!0,sx:z4.gutters,children:u(gu,{autoFocus:!0,value:E,onChange:f,children:T})}),E.id===C.STATUS.STATUS_WAIT&&u(J,{children:u(Yu,{value:D,onChange:B,renderInput:x=>u(K,b({},x))})})]})}),r(nu,{children:[u(m,{onClick:n,children:"\u041E\u0442\u043C\u0435\u043D\u0430"}),u(m,{onClick:()=>e(l),children:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C"})]})]})},z4={gutters:{my:1}};var V4=O(H4);const K4=({task:t,onSelect:e,onRemove:n})=>{const[s,a]=i.exports.useState(!1),o=uu(),l=()=>{a(!0)},c=()=>{a(!1)},E=async h=>{await v.create(h),a(!1),h.status.id===C.STATUS.STATUS_RUN&&o("/works/current-work")};return r(k,{children:[r(z,{sx:{color:"text.primary",mb:.5,p:.2,width:"auto"},children:[r(p,{sx:{display:"flex",bgcolor:"#ffffff",width:"80%",border:"1px solid #001e3c",borderRadius:"2px",cursor:"pointer",flexWrap:"wrap","&:hover":{bgcolor:"#f1f1f1",color:"text.secondary"},alignItems:"center"},onClick:()=>e(t.id),children:[u(d,{variant:"p",component:"span",sx:{width:{xs:"100%",sm:"40%"},padding:1},children:t.name}),u(d,{variant:"p",component:"span",sx:{width:"30%",padding:1,fontSize:"caption.fontSize"},children:t.description}),u(d,{variant:"p",component:"span",sx:{width:{sm:"20%"},padding:1,textAlign:"right"},children:t.ball===0?"\u043B\u0435\u0432\u044B\u0439":"\u043F\u0440\u0430\u0432\u044B\u0439"})]}),r(p,{sx:{display:"flex",flexWrap:{xs:"wrap",sm:"nowrap"},flexGrow:1,justifyContent:"center",ml:1},children:[u(m,{variant:"outlined",size:"small",sx:{mr:{xs:0,sm:.5},mb:{xs:.5,sm:0}},onClick:l,children:"\u0437\u0430\u043F\u0443\u0441\u043A"}),u(m,{variant:"outlined",size:"small",onClick:()=>n(t),children:"\u0443\u0434\u0430\u043B\u0438\u0442\u044C"})]})]}),u(su,{open:s,onCloseDialog:c,children:u(V4,{onCancel:c,onSubmit:E,task:t})})]})};var X4=O(K4);const hu=({open:t,children:e,onOk:n,onCancel:s})=>u(p,{sx:{display:"flex",justifyContent:"space-between",width:"80%",flexWrap:"wrap"},children:r(ku,{open:t,onClose:s,children:[u(eu,{}),u(tu,{children:e}),r(nu,{children:[u(m,{onClick:s,children:"\u041E\u0442\u043C\u0435\u043D\u0430"}),u(m,{onClick:n,children:"Ok"})]})]})}),Z4=t=>{const[e,n]=i.exports.useState(!1),[s,a]=i.exports.useState("");return[e,s,l=>{n(l),a(l?t:"")}]},Ru=({open:t,onAddTask:e,onCloseDialog:n,task:s})=>{const[a,o,l]=Z4("\u0418\u043C\u044F \u043D\u0435 \u043C\u043E\u0436\u0435\u0442 \u0431\u044B\u0442\u044C \u043F\u0443\u0441\u0442\u044B\u043C."),[c,E]=i.exports.useState("\u041D\u043E\u0432\u0430\u044F \u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u0430"),[h,D]=i.exports.useState(""),[A,B]=i.exports.useState(""),[f,T]=i.exports.useState(""),x=R=>{B(R.target.value)},F=R=>{const S=R.target.value;l(!S),D(R.target.value)},W=R=>{T(R.target.value)},G=()=>{if(!h){l(!0);return}e({name:h,description:A,ball:f})};return i.exports.useEffect(()=>{t&&(s?(D(s.name),B(s.description),T(s.ball),E("\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C \u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u0443")):(D(""),B(""),T(0)),l(!1))},[t]),r(k,{children:[u(eu,{children:u(d,{children:c})}),u(tu,{children:r(p,{sx:{display:"flex",flexDirection:"column"},children:[u(K,{autoFocus:!0,error:a,label:"\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435",value:h,helperText:o,variant:"filled",onChange:F,sx:{mb:1}}),u(K,{label:"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435",value:A,variant:"filled",multiline:!0,maxRows:4,onChange:x,sx:{mb:2}}),r(J,{children:[u(u4,{id:"ball-label",children:"\u041F\u043E\u0437\u0438\u0446\u0438\u044F \u0448\u0430\u0440\u0430"}),r(gu,{labelId:"ball-label",id:"ball",label:"\u041F\u043E\u0437\u0438\u0446\u0438\u044F \u0448\u0430\u0440\u0430",value:f,onChange:W,children:[u(du,{value:0,children:"\u041B\u0435\u0432\u044B\u0439"}),u(du,{value:1,children:"\u041F\u0440\u0430\u0432\u044B\u0439"})]})]})]})}),r(nu,{children:[u(m,{onClick:n,children:"\u041E\u0442\u043C\u0435\u043D\u0430"}),u(m,{onClick:G,children:s?"\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C":"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C"})]})]})},q4=()=>{const t=uu(),[e,n]=i.exports.useState(!1),[s,a]=i.exports.useState(!1),[o,l]=i.exports.useState(null),c=i.exports.useCallback(x=>{t(`/tasks/${x}`)},[]);i.exports.useEffect(()=>X.fetch(),[]);const E=i.exports.useCallback(()=>{n(!1)},[]),h=i.exports.useCallback(()=>{n(!0)},[]),D=x=>{l(x),a(!0)},A=()=>{o&&X.remove(o).then(()=>{l(null)}),a(!1)},B=()=>{l(null),a(!1)},f=i.exports.useCallback(x=>{X.create($(b({},x),{actions:[]})),E()},[]),T=i.exports.useMemo(()=>X.taskList.map(x=>u(X4,{task:x,onSelect:c,onRemove:D},x.id)),[X.taskList]);return r(p,{sx:{bgcolor:"#f9f9f9",padding:1,minHeight:"98%"},children:[r(p,{sx:{display:"flex",justifyContent:"space-between",width:"80%",flexWrap:"wrap"},children:[u(d,{variant:"h5",children:"\u0421\u043F\u0438\u0441\u043E\u043A \u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C"}),u(m,{variant:"contained",color:"primary",onClick:h,children:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C"})]}),u(_,{children:T}),u(su,{open:e,onCloseDialog:E,children:u(Ru,{open:e,onAddTask:f,onCloseDialog:E})}),r(hu,{open:s,onOk:A,onCancel:B,children:[u(d,{sx:{mb:2},children:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0432\u044B\u0431\u0440\u0430\u043D\u043D\u0443\u044E \u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u0443?"}),u(d,{align:"center",sx:{fontWeight:"bold"},children:o==null?void 0:o.name})]})]})};var J4=O(q4);const Nu=(t,e="#f1f1f1")=>i.exports.useMemo(()=>{switch(t.id){case C.STATUS.STATUS_RUN:return"#ffffe6";case C.STATUS.STATUS_DONE:return"#e8ffe6";case C.STATUS.STATUS_EXPIRED:case C.STATUS.STATUS_STOPPED:return"#ffe6e7";default:return e}},[t]),Q4=({work:t,onRemove:e})=>{const n=Nu(t.status),s=t.startTime?iu(t.startTime,"dd-MM-yyyy - HH:mm"):null,a=uu(),o=t.status.id===C.STATUS.STATUS_RUN?"pointer":"default";return r(z,{sx:{color:"text.primary",mb:.5,p:.2,width:"auto"},children:[r(p,{sx:{display:"flex",width:"80%",border:"1px solid #001e3c",borderRadius:"2px",cursor:()=>o,flexWrap:"wrap",bgcolor:n},onClick:()=>{t.status.id===C.STATUS.STATUS_RUN&&a("/works/current-work")},children:[u(d,{variant:"p",component:"span",sx:{width:{xs:"100%",sm:"20%"},padding:1},children:t.status.name}),u(d,{variant:"p",component:"span",sx:{width:{xs:"100%",sm:"40%"},padding:1},children:t.item.name}),r(d,{variant:"p",component:"span",sx:{width:{xs:"100%",sm:"20%"},padding:1},children:[!!s&&s,!s&&"\u043D\u0435\u043C\u0435\u0434\u043B\u0435\u043D\u043D\u043E"]})]}),u(p,{sx:{display:"flex",flexWrap:{xs:"wrap",sm:"nowrap"},flexGrow:1,justifyContent:"center",ml:1},children:u(m,{variant:"outlined",size:"small",onClick:()=>e(t),children:"\u0443\u0434\u0430\u043B\u0438\u0442\u044C"})})]})};var Y4=O(Q4);const ue=()=>{var f,T,x,F;uu();const[t,e]=i.exports.useState(!1),[n,s]=i.exports.useState(!1),[a,o]=i.exports.useState(null);i.exports.useEffect(()=>v.fetch(),[]);const l=W=>{o(W),e(!0)},c=()=>{s(!0)},E=()=>{a&&v.remove(a).then(()=>{o(null)}),e(!1)},h=()=>{o(null),e(!1)},D=()=>{v.clear().then(()=>{v.fetch()}),s(!1)},A=()=>{s(!1)},B=i.exports.useMemo(()=>v.workList.map(W=>u(Y4,{work:W,onRemove:l},W.id)),[v.workList]);return r(p,{sx:{bgcolor:"#f9f9f9",padding:1,minHeight:"98%"},children:[r(p,{sx:{display:"flex",justifyContent:"space-between",width:"80%",flexWrap:"wrap"},children:[u(d,{variant:"h5",children:"\u0421\u043F\u0438\u0441\u043E\u043A \u0443\u0441\u0442\u0430\u043D\u043E\u0432\u043B\u0435\u043D\u043D\u044B\u0445 \u0437\u0430\u0434\u0430\u0447"}),u(m,{variant:"outlined",size:"small",onClick:()=>c(),children:"\u041E\u0447\u0438\u0441\u0442\u0438\u0442\u044C"})]}),u(_,{children:B}),r(hu,{open:t,onOk:E,onCancel:h,children:[u(d,{sx:{mb:2},children:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0432\u044B\u0431\u0440\u0430\u043D\u043D\u0443\u044E \u0437\u0430\u0434\u0430\u0447\u0443?"}),r(d,{align:"center",sx:{fontWeight:"bold"},children:[(f=a==null?void 0:a.status)==null?void 0:f.name," ",(T=a==null?void 0:a.item)==null?void 0:T.name]})]}),r(hu,{open:n,onOk:D,onCancel:A,children:[u(d,{sx:{mb:2},children:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0437\u0430\u0434\u0430\u0447\u0438 (\u043E\u0442\u043C\u0435\u043D\u0435\u043D\u043E, \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043D\u043E, \u043F\u0440\u043E\u043F\u0443\u0449\u0435\u043D\u043E)?"}),r(d,{align:"center",sx:{fontWeight:"bold"},children:[(x=a==null?void 0:a.status)==null?void 0:x.name," ",(F=a==null?void 0:a.item)==null?void 0:F.name]})]})]})};var ee=O(ue);const te=({work:t})=>{const e=Nu(t.status);let n="";switch(t.type.id){case C.ACTION.ACTION_AZIMUTH:case C.ACTION.ACTION_SLOPE:n=t.value1+" \u0433\u0440\u0430\u0434.";break;case C.ACTION.ACTION_WAIT:n=t.value1+" \u0441\u0435\u043A.";break;case C.ACTION.ACTION_SPARK:n=t.value2+" \u0441\u0435\u043A.";break}return u(k,{children:r(z,{sx:{justifyContent:"space-between",flexWrap:"wrap",bgcolor:e,mb:1},children:[u(d,{sx:{width:{xs:"100%",sm:"15%",md:"15%"},fontWeight:"bold"},children:t.type.name}),u(d,{sx:{width:{xs:"100%",sm:"15%",md:"15%"},textAlign:{xs:"left",sm:"center"}},children:n})," ",u(d,{sx:{width:{xs:"100%",sm:"20%"},textAlign:{xs:"left",sm:"right"},fontWeight:"bold"},children:t.status.name})]},t.id)})},ne=()=>{var s;const t=i.exports.useCallback(()=>{v.stopCurrent()},[]);i.exports.useEffect(()=>{v.fetchCurrentWork()},[]);let e=null;const n=(s=v.currentWork)==null?void 0:s.work;return n&&(e=n.details.map(a=>u(te,{work:a},a.id))),r(k,{children:[r(p,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",bgcolor:"#cdcdcd",px:1},children:[u(d,{variant:"h6",children:"\u0422\u0435\u043A\u0443\u0449\u0430\u044F \u0437\u0430\u0434\u0430\u0447\u0430"}),u(p,{children:u(m,{variant:"contained",color:"primary",onClick:t,sx:{m:1},children:"\u041E\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u044C"})})]}),!e&&u(p,{sx:{my:10,fontWeight:"bold",display:"flex",width:"100%",justifyContent:"center",alignItems:"center"},children:"\u041D\u0435\u0442 \u0442\u0435\u043A\u0443\u0449\u0435\u0439 \u0437\u0430\u0434\u0430\u0447\u0438"}),u(_,{children:e})]})};var se=O(ne);const re=o=>{var l=o,{action:t,onRemove:e,onEdit:n,innerRef:s}=l,a=wu(l,["action","onRemove","onEdit","innerRef"]);return r(z,$(b({ref:s},a),{sx:{color:"text.primary",mb:.5,p:.2,width:"auto"},children:[r(p,{sx:{display:"flex",bgcolor:"#ffffff",width:"80%",border:"1px solid #001e3c",borderRadius:"2px",flexWrap:"wrap",cursor:"pointer","&:hover":{bgcolor:"#f1f1f1",color:"text.secondary"}},onClick:()=>n(t),children:[u(d,{variant:"p",component:"span",sx:{width:{xs:"100%",sm:"40%"},padding:1},children:t.type.name}),r(d,{variant:"p",component:"span",sx:{padding:1},children:[t.type.id===1&&r(d,{children:["\u0430\u0437\u0438\u043C\u0443\u0442 ",u("span",{children:t.value1})," \u0433\u0440\u0430\u0434\u0443\u0441\u043E\u0432"]}),t.type.id===2&&r(d,{children:["\u043D\u0430\u043A\u043B\u043E\u043D ",u("span",{children:t.value1})," \u0433\u0440\u0430\u0434\u0443\u0441\u043E\u0432"]}),t.type.id===3&&r(d,{children:["\u043E\u0436\u0438\u0434\u0430\u043D\u0438\u0435 ",u("span",{children:t.value1})," \u0441\u0435\u043A"]}),t.type.id===4&&r(d,{children:["\u0440\u0430\u0437\u0440\u044F\u0434 \u043A\u043E\u043B-\u0432\u043E ",u("span",{children:t.value1})," \u0432\u0440\u0435\u043C\u044F\xA0",u("span",{children:t.value2})," \u0441\u0435\u043A \u0438\u043D\u0442\u0435\u0440\u0432\u0430\u043B\xA0",u("span",{children:t.value3})," \u0441\u0435\u043A"]})]})]}),u(p,{sx:{display:"flex",flexWrap:{xs:"wrap",sm:"nowrap"},flexGrow:1,justifyContent:"center",ml:1},children:u(m,{variant:"outlined",size:"small",onClick:()=>e(t),children:"\u0443\u0434\u0430\u043B\u0438\u0442\u044C"})})]}))};var ae=O(re);const ie=({action:t,onSubmit:e,onCloseDialog:n})=>{const s=i.exports.useMemo(()=>({id:C.actionTypes[0].id,name:C.actionTypes[0].name}),[]),a=i.exports.useMemo(()=>({id:null,type:s,value1:0,value2:0,value3:0}),[]),[o,l]=i.exports.useState(t||a),[c,E]=i.exports.useState(()=>C.actionTypes.find(f=>f.id===o.type.id)),h=f=>{let T=f.target.value;o.type.id!==C.ACTION.ACTION_SLOPE&&(T=T.replace(/-/g,""));let x={};switch(f.target.dataset.source){case"value1":x={value1:T};break;case"value2":x={value2:T};break;case"value3":x={value3:T};break}l(()=>b(b({},o),x))},D=f=>{const T=f.target.value;E(T),l($(b({},o),{type:{id:T.id,name:T.name},value1:0,value2:0,value3:0}))},A=i.exports.useMemo(()=>C.actionTypes.map(f=>u(du,{value:f,children:f.name},f.id)),[]),B=()=>{const f=b({},o);return f.value1=f.type.id===C.ACTION.ACTION_SPARK?Number(String(f.value1).split(".")[0]):Number((+f.value1).toFixed(1)),f.value2=Number((+f.value2).toFixed(1)),f.value3=Number((+f.value3).toFixed(1)),b({},f)};return r(k,{children:[u(eu,{children:u(d,{children:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0435"})}),u(tu,{children:r(p,{sx:{display:"flex",flexDirection:"column"},children:[u(J,{fullWidth:!0,sx:mu.gutters,children:u(gu,{autoFocus:!0,value:c,onChange:D,children:A})}),u(J,{fullWidth:!0,children:u(K,{label:c.value1.label,value:o.value1,onChange:h,type:"number",inputProps:{"data-source":"value1",max:c.value1.max,min:c.value1.min,step:c.value1.step},sx:mu.gutters,InputLabelProps:{shrink:!0}})}),c.id===C.ACTION.ACTION_SPARK&&u(K,{label:c.value2.label,value:o.value2,onChange:h,type:"number",inputProps:{"data-source":"value2",max:c.value2.max,min:c.value2.min,step:c.value2.step},sx:mu.gutters,InputLabelProps:{shrink:!0}}),c.id===C.ACTION.ACTION_SPARK&&u(K,{label:c.value3.label,value:o.value3,onChange:h,type:"number",inputProps:{"data-source":"value3",max:c.value3.max,min:c.value3.min,step:c.value3.step},sx:mu.gutters,InputLabelProps:{shrink:!0}})]})}),r(nu,{children:[u(m,{onClick:n,children:"\u041E\u0442\u043C\u0435\u043D\u0430"}),u(m,{onClick:()=>e(B()),children:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C"})]})]})},mu={gutters:{my:1}};var oe=O(ie);const le=()=>{var yu;const t=e4(),e=uu(),[n,s]=i.exports.useState(!1),[a,o]=i.exports.useState(null),[l,c]=i.exports.useState({}),[E,h]=i.exports.useState(!1),[D,A]=i.exports.useState(null),[B,f]=i.exports.useState(!1),T=i.exports.useCallback(()=>{e("/tasks")},[]);i.exports.useEffect(()=>{X.fetchById(t.id).then(y=>c(y))},[]);const x=i.exports.useCallback(()=>{s(!1)},[]),F=i.exports.useCallback(y=>{o(y),s(!0)},[]),W=i.exports.useCallback(()=>{o(null),s(!0)},[]),G=y=>{A(y),h(!0)},R=()=>{if(D){const y=l.actions.filter(L=>D.id!==L.id),N=$(b({},l),{actions:y});c(N),X.update(N).then(()=>{A(null)})}h(!1)},S=()=>{A(null),h(!1)},I=y=>{y.id||(y.id=r4());const N=l.actions.findIndex(fu=>fu.id===y.id),L=[...l.actions];N===-1?L.push(y):L[N]=b({},y);const q=$(b({},l),{actions:[...L]});c(q),s(!1),X.update(q)},P=Array.isArray(l.actions)?l.actions.map((y,N)=>u(t4,{draggableId:y.id,index:N,children:L=>u(ae,$(b(b({innerRef:L.innerRef},L.draggableProps),L.dragHandleProps),{action:y,onRemove:G,onEdit:F}))},y.id)):null,Y=y=>{if(!y.destination)return;const N=H(l.actions,y.source.index,y.destination.index),L=$(b({},l),{actions:N});c(L),X.update(L)},H=i.exports.useCallback((y,N,L)=>{const q=Array.from(y),[fu]=q.splice(N,1);return q.splice(L,0,fu),q},[]),Z=({name:y,description:N,ball:L})=>{const q=$(b({},l),{name:y,description:N,ball:L});c(q),f(!1),X.update(q)},ru=i.exports.useCallback(()=>{f(!1)},[]);return r(p,{sx:{bgcolor:"#f9f9f9",padding:1,minHeight:"98%"},children:[r(p,{sx:{display:"flex",justifyContent:"space-between",width:"80%",flexWrap:"wrap"},children:[u(d,{variant:"h5",children:"\u0421\u043E\u0441\u0442\u0430\u0432 \u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u044B"}),r(p,{children:[u(m,{variant:"contained",color:"primary",onClick:T,sx:{mr:1},children:"\u041A \u0441\u043F\u0438\u0441\u043A\u0443"}),u(m,{variant:"contained",color:"primary",onClick:W,children:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C"})]})]}),r(p,{sx:{display:"flex",justifyContent:"start"},children:[u(m,{color:"primary",onClick:()=>f(!0),sx:{mr:1},children:"\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C"}),r(d,{variant:"h6",sx:{fontStyle:"italic",color:"blue",my:1},children:[`\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435: ${l.name||""}`," ",u("br",{}),`\u041F\u043E\u0437\u0438\u0446\u0438\u044F \u0448\u0430\u0440\u0430: ${l.ball===0?"\u043B\u0435\u0432\u044B\u0439":"\u043F\u0440\u0430\u0432\u044B\u0439"}`]})]}),P&&P.length<=0&&u(p,{sx:{my:10,fontWeight:"bold",display:"flex",width:"100%",justifyContent:"center",alignItems:"center"},children:"\u0421\u043F\u0438\u0441\u043E\u043A \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0439 \u043F\u0443\u0441\u0442"}),u(n4,{onDragEnd:Y,children:u(s4,{droppableId:"program",children:y=>r(_,$(b({className:"program",ref:y.innerRef},y.droppableProps),{children:[P,y.placeholder]}))})}),u(su,{open:n,onCloseDialog:x,children:u(oe,{open:n,onCloseDialog:x,onSubmit:I,action:a})}),r(hu,{open:E,onOk:R,onCancel:S,children:[u(d,{sx:{mb:2},children:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0432\u044B\u0431\u0440\u0430\u043D\u043D\u043E\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435?"}),u(d,{align:"center",sx:{fontWeight:"bold"},children:(yu=D==null?void 0:D.type)==null?void 0:yu.name})]}),u(su,{open:B,onCloseDialog:ru,children:u(Ru,{task:l,open:B,onAddTask:Z,onCloseDialog:ru})})]})};var ce=O(le);const de=()=>{i.exports.useEffect(()=>{g.fetch()},[]);const t=n=>{g.update(b({},n))},e=g.settingList.map(n=>{let s=!0;return(n.id===g.SETTING.SETTING_VERSION||n.id===g.SETTING.SETTING_BALL)&&(s=!1),u(Ou,{setting:n,onEdit:t,editable:s},n.id)});return u(k,{children:u(_,{sx:{mb:2},children:e})})};var pe=O(de);const he=({openDialog:t,openBallDialog:e,openConfirm:n,disableAll:s})=>r(k,{children:[u(m,{disabled:s,variant:"contained",color:"primary",onClick:()=>{n("update")},sx:{mr:1,mb:1},children:"\u041E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u0435 \u0441\u0435\u0440\u0432\u0435\u0440\u0430"}),u(m,{disabled:s,variant:"contained",color:"primary",onClick:()=>{n("shutdown")},sx:{mr:1,mb:1},children:"\u0412\u044B\u043A\u043B\u044E\u0447\u0438\u0442\u044C \u0443\u0441\u0442\u0440\u043E\u0439\u0441\u0442\u0432\u043E"}),u(m,{disabled:s,variant:"contained",color:"primary",onClick:()=>{n("restart")},sx:{mr:1,mb:1},children:"\u0420\u0435\u0441\u0442\u0430\u0440\u0442"}),u(m,{disabled:s,variant:"contained",color:"primary",onClick:()=>{t("azimuth")},sx:{mr:1,mb:1},children:"\u041A\u0430\u043B\u0438\u0431\u0440\u043E\u0432\u043A\u0430 \u0430\u0437\u0438\u043C\u0443\u0442\u0430"}),u(m,{disabled:s,variant:"contained",color:"primary",onClick:()=>{t("slope")},sx:{mr:1,mb:1},children:"\u041A\u0430\u043B\u0438\u0431\u0440\u043E\u0432\u043A\u0430 \u043D\u0430\u043A\u043B\u043E\u043D\u0430"}),u(m,{disabled:s,variant:"contained",color:"primary",onClick:()=>{e()},sx:{mr:1,mb:1},children:"\u041F\u043E\u0437\u0438\u0446\u0438\u044F \u0448\u0430\u0440\u0430"})]}),me=[{description:'\u0423\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u0435 \u0443\u0441\u0442\u0440\u043E\u0439\u0441\u0442\u0432\u043E \u043D\u0430 \u0430\u0437\u0438\u043C\u0443\u0442 0 \u0438 \u043D\u0430\u0436\u043C\u0438\u0442\u0435 "\u0414\u0430\u043B\u0435\u0435".',time:0},{description:`\u041F\u043E\u0432\u043E\u0440\u043E\u0442 \u043F\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C\u044E 5 \u0441\u0435\u043A. \u041F\u043E\u0441\u043B\u0435 \u043E\u0441\u0442\u0430\u043D\u043E\u0432\u043A\u0438 \u0432\u0432\u0435\u0434\u0438\u0442\u0435
                  \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0430\u0437\u0438\u043C\u0443\u0442\u0430.`,time:5},{description:`\u041F\u043E\u0432\u043E\u0440\u043E\u0442 \u043F\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C\u044E 10 \u0441\u0435\u043A. \u041F\u043E\u0441\u043B\u0435 \u043E\u0441\u0442\u0430\u043D\u043E\u0432\u043A\u0438 \u0432\u0432\u0435\u0434\u0438\u0442\u0435
                  \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0430\u0437\u0438\u043C\u0443\u0442\u0430.`,time:10},{description:`\u041F\u043E\u0432\u043E\u0440\u043E\u0442 \u043F\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C\u044E 15 \u0441\u0435\u043A. \u041F\u043E\u0441\u043B\u0435 \u043E\u0441\u0442\u0430\u043D\u043E\u0432\u043A\u0438 \u0432\u0432\u0435\u0434\u0438\u0442\u0435
                  \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0430\u0437\u0438\u043C\u0443\u0442\u0430.`,time:15}],fe=[{description:'\u0423\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u0435 \u043D\u0430\u043A\u043B\u043E\u043D \u0443\u0441\u0442\u0440\u043E\u0439\u0441\u0442\u0432\u0430 \u043D\u0430 0 \u0438 \u043D\u0430\u0436\u043C\u0438\u0442\u0435 "\u0414\u0430\u043B\u0435\u0435".',time:0},{description:`\u041D\u0430\u043A\u043B\u043E\u043D \u043F\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C\u044E 2 \u0441\u0435\u043A. \u041F\u043E\u0441\u043B\u0435 \u043E\u0441\u0442\u0430\u043D\u043E\u0432\u043A\u0438 \u0432\u0432\u0435\u0434\u0438\u0442\u0435
                  \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0443\u0433\u043B\u0430 \u043D\u0430\u043A\u043B\u043E\u043D\u0430.`,time:2},{description:`\u041D\u0430\u043A\u043B\u043E\u043D \u043F\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C\u044E 4 \u0441\u0435\u043A. \u041F\u043E\u0441\u043B\u0435 \u043E\u0441\u0442\u0430\u043D\u043E\u0432\u043A\u0438 \u0432\u0432\u0435\u0434\u0438\u0442\u0435
                  \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0443\u0433\u043B\u0430 \u043D\u0430\u043A\u043B\u043E\u043D\u0430.`,time:4},{description:`\u041D\u0430\u043A\u043B\u043E\u043D \u043F\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C\u044E 6 \u0441\u0435\u043A. \u041F\u043E\u0441\u043B\u0435 \u043E\u0441\u0442\u0430\u043D\u043E\u0432\u043A\u0438 \u0432\u0432\u0435\u0434\u0438\u0442\u0435
                  \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0443\u0433\u043B\u0430 \u043D\u0430\u043A\u043B\u043E\u043D\u0430.`,time:6}],xe=({onCancel:t,mode:e})=>{const[n,s]=i.exports.useState(0),[a,o]=i.exports.useState(!1);let l="",c=[];switch(e){case"azimuth":l="\u041A\u0430\u043B\u0438\u0431\u0440\u043E\u0432\u043A\u0430 \u0430\u0437\u0438\u043C\u0443\u0442\u0430",c=me;break;case"slope":l="\u041A\u0430\u043B\u0438\u0431\u0440\u043E\u0432\u043A\u0430 \u043D\u0430\u043A\u043B\u043E\u043D\u0430",c=fe;break}const E=c.length,[h,D]=i.exports.useState(new Array(E).fill(0)),[A,B]=i.exports.useState(new Array(E).fill(0)),f=(S,I=3)=>Number(S.toFixed(I)),T=()=>{v.stopCurrent(),o(!0);const S=c[n].time;let I=()=>{};switch(e){case"azimuth":I=g.calibrateAzimuth;break;case"slope":I=g.calibrateSlope;break}I(S)},x=()=>{v.stopCurrent(),t()},F=S=>{const I=+S.target.value,P=[...h],Y=[...A];P[n]=I;let H=f((I-P[n-1])/c[n].time);H=H<=0?0:H,Y[n]=H,D(P),B(Y)},W=()=>{v.stopCurrent();const S=[0];for(let Z=1;Z<c.length;Z++){const ru=f((h[Z]-h[Z-1])/c[Z].time);S.push(ru)}const I=S.reduce((Z,ru)=>Z+ru),P=f(I/(c.length-1));let Y={},H={};switch(e){case"azimuth":Y=$(b({},g.settingList[0]),{value:P}),H=$(b({},g.settingList[2]),{value:h[h.length-1]});break;case"slope":Y=$(b({},g.settingList[1]),{value:P}),H=$(b({},g.settingList[3]),{value:h[h.length-1]});break}P>0&&(g.update(Y),g.update(H)),t()},G=()=>{s(S=>S+1),o(!1)},R=()=>{s(S=>S-1),o(!1)};return r(k,{children:[u(eu,{children:u(d,{children:l})}),u(tu,{children:r(p,{sx:{display:"flex",flexDirection:"column"},children:[u(p,{sx:{p:2},children:c[n].description}),n!==0&&r(J,{children:[u(m,{onClick:T,variant:"contained",color:"primary",disabled:a,sx:{width:{md:"50%",xl:"25%"},mb:1,ml:1},children:"\u0421\u0442\u0430\u0440\u0442"}),u(K,{sx:{m:1},label:"\u0417\u043D\u0430\u0447\u0435\u043D\u0438\u0435",type:"number",inputProps:{max:350,min:0,step:.1},value:h[n],onChange:F,InputLabelProps:{shrink:!0}}),r(d,{sx:{mx:1},children:["\u0421\u043A\u043E\u0440\u043E\u0441\u0442\u044C: ",A[n]]})]}),u(a4,{sx:{justifySelf:"flex-end"},variant:"text",steps:E,position:"static",activeStep:n,nextButton:r(m,{size:"small",onClick:G,disabled:n===E-1,children:["\u0414\u0430\u043B\u0435\u0435",u(i4,{})]}),backButton:r(m,{size:"small",onClick:R,disabled:n===0,children:[u(o4,{}),"\u041D\u0430\u0437\u0430\u0434"]})})]})}),r(nu,{children:[u(m,{onClick:x,children:"\u041E\u0442\u043C\u0435\u043D\u0430"}),u(m,{onClick:W,children:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C"})]})]})},Uu=2076,Ce=({onCancel:t})=>{const[e,n]=i.exports.useState(1),[s,a]=i.exports.useState(!1);return r(k,{children:[r(eu,{children:[u(d,{children:"\u0423\u0441\u0442\u0430\u043D\u043E\u0432\u043A\u0430 \u043F\u043E\u0437\u0438\u0446\u0438\u0438 \u0448\u0430\u0440\u0430 (\u0448\u0430\u0433\u0438)"}),u(d,{children:"\u041F\u043E\u043B\u043D\u044B\u0439 \u043E\u0431\u043E\u0440\u043E\u0442 - 2076 \u0448\u0430\u0433\u043E\u0432, 1 \u0433\u0440\u0430\u0434\u0443\u0441 - ~5,62 \u0448\u0430\u0433\u0430."})]}),u(tu,{children:r(p,{sx:{display:"flex",width:"100%"},children:[" ",r(J,{sx:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-between"},children:[u(m,{disabled:s,onClick:async()=>{a(!0),await g.rotateCCW(e),a(!1)},children:"\u043F\u0440\u043E\u0442\u0438\u0432 \u0447\u0430\u0441\u043E\u0432\u043E\u0439"}),u(K,{autoFocus:!0,sx:{m:1,width:"40%"},label:"\u041A\u043E\u043B-\u0432\u043E \u0448\u0430\u0433\u043E\u0432 \u043F\u043E\u0432\u043E\u0440\u043E\u0442\u0430",type:"number",inputProps:{max:2076,min:1,step:1},value:e,onChange:E=>{let h=E.target.value;h=h>Uu?Uu:h,h=h<0?1:h,n(h)},InputLabelProps:{shrink:!0}}),u(m,{disabled:s,onClick:async()=>{a(!0),await g.rotateCW(e),a(!1)},children:"\u043F\u043E \u0447\u0430\u0441\u043E\u0432\u043E\u0439"})]})]})}),u(nu,{children:u(m,{onClick:t,children:"\u041E\u0442\u043C\u0435\u043D\u0430"})})]})};var Ee=O(Ce);const be=({disableAll:t})=>{const e=i.exports.useRef();return u(k,{children:r(p,{sx:{display:"flex",width:"100%",flexWrap:"wrap"},children:[u(m,{disabled:t,variant:"contained",color:"primary",onClick:()=>{g.backup()},sx:{mr:1,mb:1},children:"\u0420\u0435\u0437\u0435\u0440\u0432\u043D\u0430\u044F \u043A\u043E\u043F\u0438\u044F \u0411\u0414"}),u(p,{children:r("label",{htmlFor:"upload",children:[u("input",{ref:e,style:{display:"none"},id:"upload",name:"upload",type:"file",onInput:async a=>{await g.restore(a.target.files[0])}}),u(m,{disabled:t,variant:"contained",color:"primary",component:"span",sx:{mr:1,mb:1},children:"\u0412\u043E\u0441\u0441\u0442\u0430\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u0435 \u0411\u0414"})]})})]})})},ge=()=>{const[t,e]=i.exports.useState(!1),[n,s]=i.exports.useState(!1),[a,o]=i.exports.useState(!1),[l,c]=i.exports.useState("azimuth"),[E,h]=i.exports.useState(""),[D,A]=i.exports.useState(""),[B,f]=i.exports.useState(!1),T=S=>{c(S),e(!0)},x=()=>{s(!0)},F=S=>{h(S);let I="";switch(S){case"update":I=`\u041E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u0435 \u0437\u0430\u0439\u043C\u0435\u0442 3-5 \u043C\u0438\u043D\u0443\u0442.
                   \u0412 \u044D\u0442\u043E \u0432\u0440\u0435\u043C\u044F \u0441\u0435\u0440\u0432\u0435\u0440 \u0431\u0443\u0434\u0435\u0442 \u043D\u0435\u0434\u043E\u0441\u0442\u0443\u043F\u0435\u043D.
                   \u041D\u0435 \u043E\u0442\u043A\u043B\u044E\u0447\u0430\u0439\u0442\u0435 \u0443\u0441\u0442\u0440\u043E\u0439\u0441\u0442\u0432\u043E \u043E\u0442 \u043F\u0438\u0442\u0430\u043D\u0438\u044F.

                   \u041F\u0440\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u044C?
        `;break;case"shutdown":I=`\u0412\u044B\u043A\u043B\u044E\u0447\u0438\u0442\u044C \u0441\u0435\u0440\u0432\u0435\u0440?
        `;break;case"restart":I=`\u041F\u0435\u0440\u0435\u0437\u0430\u043F\u0443\u0441\u0442\u0438\u0442\u044C \u0441\u0435\u0440\u0432\u0435\u0440?
        `;break}A(()=>I),o(!0),f(!0)},W=()=>{let S=()=>{};switch(E){case"update":S=g.updateServer;break;case"shutdown":S=g.shutdown;break;case"restart":S=g.restart;break}S(),o(!1)},G=()=>{e(!1),s(!1)},R=()=>{o(!1),f(!1)};return r(k,{children:[u(d,{variant:"h6",children:"\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438"}),u(pe,{}),u(he,{openDialog:T,openBallDialog:x,openConfirm:F,disableAll:B}),u(be,{disableAll:B}),u(su,{open:t,onCloseDialog:G,children:u(xe,{onCancel:G,mode:l})}),u(su,{open:n,onCloseDialog:G,children:u(Ee,{onCancel:G})}),r(su,{open:a,onCloseDialog:R,children:[u(eu,{children:u(d,{children:"\u041F\u043E\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043D\u0438\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044F"})}),u(tu,{children:D}),r(nu,{children:[u(m,{onClick:R,children:"\u041E\u0442\u043C\u0435\u043D\u0430"}),u(m,{onClick:W,children:"Ok"})]})]})]})},ye=()=>r(k,{children:[u(d,{sx:{color:"red",border:"2px solid red",borderRadius:1,fontWeight:"bold",width:"80%",m:"10px auto",p:1},children:"\u0420\u0435\u043C\u043E\u043D\u0442"}),u(p,{sx:{bgcolor:"#f9f9f9",p:1,display:"flex",flexWrap:"wrap",justifyContent:"center"},children:u(m,{variant:"contained",color:"primary",onClick:()=>{g.repair()},children:"\u0421\u0442\u0430\u0440\u0442"})})]});var Te=O(ye);const Q="/",Se=({routes:t})=>u(k,{children:u(l4,{children:u(D4,{children:u(c4,{children:r(M,{path:`${Q}`,element:u(y4,{}),children:[u(M,{path:`${Q}`,element:u(Lu,{})}),u(M,{path:`${Q}remont`,element:u(Te,{})}),r(M,{path:`${Q}tasks`,element:u(j4,{}),children:[u(M,{path:`${Q}tasks`,element:u(J4,{})}),u(M,{path:`${Q}tasks:id`,element:u(ce,{})})]}),r(M,{path:`${Q}works`,element:u(G4,{}),children:[u(M,{path:`${Q}works`,element:u(ee,{})}),u(M,{path:"/works/current-work",element:u(se,{})})]}),u(M,{path:`${Q}settings`,element:u(ge,{})}),u(M,{path:"*",element:u(Lu,{})})]})})})})});const ou=d4(`ws://${location.hostname}`);ou.on("connect",()=>{console.log("socket ",ou.connected)});ou.on("workStatusUpdate",t=>{v.fetch(),v.fetchCurrentWork(t)});ou.on("serverTime",t=>{g.setServerTime(+t)});ou.on("settingsUpdate",t=>{g.fetch()});const we=p4({palette:{primary:{main:"#1976d2"},bgGray:{main:"#f9f9f9"}}},h4);m4.render(u(f4.StrictMode,{children:u(x4,{theme:we,children:u(C4,{dateAdapter:E4,locale:bu,children:u(Se,{})})})}),document.getElementById("root"));
