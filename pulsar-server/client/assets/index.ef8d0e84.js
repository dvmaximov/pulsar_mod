var Uu=Object.defineProperty,Pu=Object.defineProperties;var Mu=Object.getOwnPropertyDescriptors;var lu=Object.getOwnPropertySymbols;var wu=Object.prototype.hasOwnProperty,Tu=Object.prototype.propertyIsEnumerable;var fu=(n,e,t)=>e in n?Uu(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,g=(n,e)=>{for(var t in e||(e={}))wu.call(e,t)&&fu(n,t,e[t]);if(lu)for(var t of lu(e))Tu.call(e,t)&&fu(n,t,e[t]);return n},F=(n,e)=>Pu(n,Mu(e));var vu=(n,e)=>{var t={};for(var s in n)wu.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&lu)for(var s of lu(n))e.indexOf(s)<0&&Tu.call(n,s)&&(t[s]=n[s]);return t};var N=(n,e,t)=>(fu(n,typeof e!="symbol"?e+"":e,t),t);import{s as _u,j as u,O as xu,d as ju,a as Gu,b as Hu,c as zu,u as uu,L as z,e as Su,A as Vu,C as Cu,f as r,T as Ku,g as d,B as p,h as _,I as Du,i as Xu,k as Zu,D as qu,l as Ju,r as i,m as V,n as cu,o as iu,p as I,F as D,q as h,t as ku,v as eu,w as tu,x as J,y as K,z as nu,E as gu,M as du,S as bu,G as Qu,H as Au,J as Bu,K as Yu,N as u4,P as e4,Q as t4,R as n4,U as s4,V as r4,W as a4,X as i4,Y as o4,Z as l4,_ as j,$ as c4,a0 as d4,a1 as p4,a2 as h4,a3 as m4,a4 as f4,a5 as x4,a6 as C4}from"./vendor.7513ebbe.js";const g4=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function t(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerpolicy&&(o.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?o.credentials="include":a.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(a){if(a.ep)return;a.ep=!0;const o=t(a);fetch(a.href,o)}};g4();const b4=_u("main")({flexGrow:1,margin:10}),y4=()=>u(b4,{children:u(xu,{})}),pu="/";var Wu=[{label:"\u0413\u043B\u0430\u0432\u043D\u0430\u044F",path:`${pu}`,icon:u(ju,{color:"primary"})},{label:"\u041F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u044B",path:`${pu}tasks`,icon:u(Gu,{color:"primary"})},{label:"\u0417\u0430\u0434\u0430\u0447\u0438",path:`${pu}works`,icon:u(Hu,{color:"primary"})},{label:"\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438",path:`${pu}settings`,icon:u(zu,{color:"primary"})}];const Fu="Pulsar",E4=({toggleOpen:n})=>{const e=uu(),t=Wu.map(s=>u(z,{button:!0,onClick:()=>e(s.path,{replace:!0}),children:u(Su,{primary:s.label})},s.label));return u(Vu,{position:"fixed",children:u(Cu,{maxWidth:"xl",children:r(Ku,{disableGutters:!0,children:[u(d,{variant:"h6",noWrap:!0,component:"h1",sx:au.logoSm,children:Fu}),u(p,{sx:au.menu,children:u(_,{component:"nav",sx:au.nav,children:t})}),u(p,{sx:au.icon,children:u(Du,{size:"large","aria-label":"open menu","aria-controls":"menu-appbar","aria-haspopup":"true",color:"inherit",onClick:n,sx:au.iconButton,children:u(Xu,{})})}),u(d,{variant:"h6",noWrap:!0,component:"h1",sx:au.logoXs,children:Fu})]})})})},au={logoSm:{mr:2,display:{xs:"none",sm:"flex"}},logoXs:{flexGrow:1,justifyContent:"flex-end",display:{xs:"flex",sm:"none"}},menu:{flexGrow:1,justifyContent:"flex-end",display:{xs:"none",sm:"flex"}},nav:{display:"flex",flexDirection:"row"},iconButton:{padding:"20px"},icon:{display:{xs:"flex",sm:"none"}}},w4=({open:n,toggleOpen:e})=>{const t=uu(),s=o=>{t(o,{replace:!0}),e()},a=Wu.map(o=>r(z,{button:!0,onClick:()=>s(o.path),children:[u(Zu,{children:o.icon}),u(Su,{primary:o.label})]},o.label));return r(qu,{sx:Iu.drawer,open:n,onClose:e,children:[r(p,{sx:{display:{xs:"flex",sm:"none"}},children:[u(d,{children:"Pulsar"}),u(Du,{size:"large","aria-label":"open menu","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:e,sx:Iu.closeButton,children:u(Ju,{})})]}),u(_,{component:"nav",children:a})]})},Iu={drawer:{width:300,"& .MuiDrawer-paper":{width:300,boxSizing:"border-box",top:"auto",padding:"10px 10px"}},closeButton:{color:"text.secondary"}},T4=n=>{const[e,t]=i.exports.useState(!!n);return[e,()=>{t(()=>!e)}]},v4=({children:n})=>{const[e,t]=T4(!1);return r(Cu,{maxWidth:"100vw",disableGutters:!0,sx:$u.container,children:[u(E4,{toggleOpen:t}),r(Cu,{sx:$u.content,disableGutters:!0,children:[u(w4,{open:e,toggleOpen:t}),n]})]})},$u={container:{display:"flex",flexDirection:"column",minHeight:"100vh"},content:{display:"flex",flexGrow:1,mt:8}},P=`${location.protocol}//${location.hostname}`;class S4{async fetch(e){return(await V.get(`${P}/${e}`)).data}async rotateCW(e,t){return(await V.get(`${P}/${e}/${t}`)).data}async rotateCCW(e,t){console.log(`${P}/${e}/${t}`);const s=await V.get(`${P}/${e}/${t}`);return console.log(s),s.data}async fetchById(e,t){return(await V.get(`${P}/${e}/${t}`)).data}async create(e,t){return(await V.post(`${P}/${e}`,t)).data}async remove(e,t){return(await V.delete(`${P}/${e}/${t}`)).data}async update(e,t){return(await V.put(`${P}/${e}/${t.id}`,t)).data}async repair(e){return await V.post(`${P}/${e}`)}async backup(e){await V({url:`${P}/${e}`,method:"GET",responseType:"blob"}).then(t=>{const s=t.headers["content-type"],a=new Blob([t.data],{type:s,encoding:"UTF-8"}),o=document.createElement("a"),l=t.headers["content-disposition"].split("filename=")[1].replace(/"/g,"");o.href=window.URL.createObjectURL(a),o.download=l,o.click()})}async restore(e,t){const s=new FormData;return s.append("restore",t),console.log(`${P}/${e}`),await V.post(`${P}/${e}`,s,{headers:{"Content-Type":"multipart/form-data"}})}}var v=new S4;class D4{constructor(){N(this,"actionTypes",[]);N(this,"workTypes",[]);N(this,"statusTypes",[]);N(this,"WORK",{});N(this,"STATUS",{});N(this,"ACTION",{});cu(this),this.fetch()}fill(e){this.actionTypes=e.actionTypes,this.workTypes=e.workTypes,this.statusTypes=e.statusTypes,this.WORK=e.WORK,this.STATUS=e.STATUS,this.ACTION=e.ACTION}async fetch(){const e=await v.fetch("api/dictonary");this.fill(e.result)}getStatus(e){return this.statusTypes.find(t=>t.id===e)}}const b=new D4;class k4{constructor(){N(this,"settingList",[]);N(this,"SETTING",{});N(this,"serverTime","");cu(this)}setServerTime(e){this.serverTime=iu(e,"dd-MM-yyyy - HH:mm")}fill(e){this.settingList=e}fillSETTING(e){this.SETTING=e}async rotateCW(e){return(await v.rotateCW("api/settings/rotateCW",e)).data}async rotateCCW(e){return(await v.rotateCW("api/settings/rotateCCW",e)).data}async fetch(){const e=await v.fetch("api/settings");this.fill(e.settings),this.fillSETTING(e.SETTING),await v.fetch("api/settings/serverTime")}async update(e){await v.update("api/settings",e);const t=[...this.settingList],s=t.findIndex(a=>a.id===e.id);t[s]=g({},e),this.fill(t)}async updateServer(){setTimeout(()=>{window.close()},2e3),await v.fetch("api/settings/updateServer")}async backup(){await v.backup("api/settings/backup")}async repair(){setTimeout(()=>{window.close()},2e3),await v.repair("api/settings/repair")}async restore(e){return setTimeout(()=>{window.close()},2e3),await v.restore("api/settings/restore",e)}async shutdown(){setTimeout(()=>{window.close()},2e3),await v.fetch("api/settings/shutdown")}async restart(){setTimeout(()=>{window.close()},2e3),await v.fetch("api/settings/restart")}async calibrateAzimuth(e){return await v.fetch(`api/works/calibrateAzimuth?time=${e}`)}async calibrateSlope(e){return await v.fetch(`api/works/calibrateSlope?time=${e}`)}}const y=new k4;class A4{constructor(){N(this,"taskList",[]);cu(this)}fill(e){this.taskList=e}async fetch(){const e=await v.fetch("api/tasks");this.fill(e.result)}async fetchById(e){return(await v.fetchById("api/tasks",e)).result}async remove(e){const t=await v.remove("api/tasks",e.id),s=this.taskList.filter(a=>a.id!==e.id);return this.fill(s),t.result}async create(e){const s=(await v.create("api/tasks",e)).result;this.fill([...this.taskList,s])}async update(e){const t=await v.update("api/tasks",e);let s=this.taskList.findIndex(a=>a.id===e.id);return this.taskList[s]=g({},e),t.result}}const X=new A4;class B4{constructor(){N(this,"workList",[]);N(this,"currentWork",null);cu(this)}fill(e){this.workList=e}fillCurrentWork(e){this.currentWork=e}async fetch(){const e=await v.fetch("api/works");this.fill(e.result)}async fetchCurrentWork(){const e=await v.fetch("api/works/currentWork");this.fillCurrentWork(e.result)}async create(e){const s=(await v.create("api/works",e)).result;this.fill([...this.workList,s])}async stopCurrent(){return await v.fetch("api/works/stopCurrent")}async remove(e){const t=await v.remove("api/works",e.id),s=this.workList.filter(a=>a.id!==e.id);return this.fill(s),t.result}}const k=new B4,W4=()=>{var o;i.exports.useEffect(()=>{k.fetchCurrentWork()},[]);const n=uu(),e=i.exports.useCallback(()=>{n("/works/current-work")},[]),t=i.exports.useCallback(()=>{k.stopCurrent()},[]);let s=[];const a=(o=k.currentWork)==null?void 0:o.work;return a&&(s=a.details.filter(l=>l.status.id===b.STATUS.STATUS_RUN).map(l=>u(z,{children:l.type.name},l.id))),r(D,{children:[r(p,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",p:1,bgcolor:"#cdcdcd"},children:[u(d,{variant:"span",children:"\u0422\u0435\u043A\u0443\u0449\u0435\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435"}),s.length===0&&u(d,{variant:"span",children:"\u043E\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442"}),s.length!==0&&u(_,{children:s})]}),r(p,{sx:{display:"flex",bgcolor:"#cdcdcd"},children:[u(h,{variant:"contained",color:"primary",onClick:e,sx:{m:1},children:"\u041F\u043E\u0434\u0440\u043E\u0431\u043D\u0435\u0435"}),u(h,{variant:"contained",color:"primary",onClick:t,sx:{m:1},children:"\u041E\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u044C"})]})]})};var F4=I(W4);const I4=()=>{const n=k.workList.filter(e=>e.status.id===b.STATUS.STATUS_RUN).map(e=>u(z,{children:e.item.name},e.id));return r(p,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",bgcolor:"#cdcdcd",p:1,mb:2},children:[u(d,{variant:"span",children:"\u0422\u0435\u043A\u0443\u0449\u0430\u044F \u0437\u0430\u0434\u0430\u0447\u0430 "}),n.length===0&&u(d,{variant:"span",children:"\u043E\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442"}),n.length!==0&&u(_,{children:n})]})};var $4=I(I4);const O4=()=>{const n=k.workList.filter(e=>e.status.id===b.STATUS.STATUS_WAIT).map(e=>{const t=iu(e.startTime,"dd-MM-yyyy - HH:mm");return r(z,{sx:{flexWrap:"wrap",justifyContent:"space-between"},children:[u(p,{variant:"div",sx:{width:"70%"},children:e.item.name}),u(p,{variant:"div",sx:{color:"blue"},children:t})]},e.id)});return r(p,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",bgcolor:"#cdcdcd",p:1,my:2,flexWrap:"wrap"},children:[u(d,{variant:"span",children:"\u0417\u0430\u043F\u043B\u0430\u043D\u0438\u0440\u043E\u0432\u0430\u043D\u043D\u044B\u0435"}),n.length===0&&u(d,{variant:"span",children:"\u043E\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044E\u0442"}),n.length!==0&&u(_,{sx:{width:"100%"},children:n})]})};var L4=I(O4);const R4=()=>(i.exports.useEffect(()=>{k.fetch()},[]),r(p,{sx:{borderWidth:"1px",borderStyle:"solid",borderColor:"black",borderRadius:"5px",minHeight:"98%",p:.5,m:.5},children:[u(d,{children:"\u0418\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044F \u043E \u0437\u0430\u0434\u0430\u043D\u0438\u044F\u0445"}),u(L4,{}),u($4,{}),u(F4,{})]})),su=n=>{const{open:e,onCloseDialog:t,children:s}=n;return u(ku,{open:e,onClose:t,sx:{"& .MuiPaper-root":{width:{xs:"98%",sm:"50%"}}},children:s})},N4=({setting:n,onCancel:e,onSubmit:t})=>{const[s,a]=i.exports.useState(g({},n)),o=c=>{let C=c.target.value;s.id!==y.SETTING.SETTING_CURRENT_SLOPE&&(C=C.replace(/-/g,"")),a(F(g({},s),{value:C}))},l=()=>{const c=g({},s);return c.type==="number"&&(c.value=Number((+c.value).toFixed(3))),g({},c)};return r(D,{children:[u(eu,{children:u(d,{children:"\u0417\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u043F\u0430\u0440\u0430\u043C\u0435\u0442\u0440\u0430"})}),u(tu,{children:r(p,{sx:{display:"flex",flexDirection:"column"},children:[" ",s.type==="number"?u(J,{children:u(K,{autoFocus:!0,sx:{m:1},label:"\u0417\u043D\u0430\u0447\u0435\u043D\u0438\u0435",type:"number",inputProps:{max:350,min:0,step:.1},value:s.value,onChange:o,InputLabelProps:{shrink:!0}})}):u(J,{children:u(K,{autoFocus:!0,sx:{m:1},label:"\u0417\u043D\u0430\u0447\u0435\u043D\u0438\u0435",value:s.value,onChange:o,InputLabelProps:{shrink:!0}})})]})}),r(nu,{children:[u(h,{onClick:e,children:"\u041E\u0442\u043C\u0435\u043D\u0430"}),u(h,{onClick:()=>t(l()),children:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C"})]})]})};var U4=I(N4);const Ou=({setting:n,onEdit:e,editable:t=!0})=>{const[s,a]=i.exports.useState(!1),o=()=>{a(!0)},l=()=>{a(!1)},c=m=>{e(g({},m)),l()},C=m=>m==="0"?"\u043B\u0435\u0432\u044B\u0439":"\u043F\u0440\u0430\u0432\u044B\u0439";return r(D,{children:[r(z,{sx:{justifyContent:"space-between",wordWrap:"wrap",bgcolor:"#f9f9f9"},children:[u(d,{sx:{width:"40%"},children:n.name}),r(p,{sx:{width:"60%",display:"flex",justifyContent:"space-between"},children:[u(d,{sx:{width:"50%",display:"flex",justifyContent:"center",fontSize:"1.5rem",color:"blue"},children:n.id===9?C(n.value):n.value}),t&&u(h,{onClick:o,children:"\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C"})]})]},n.id),u(su,{open:s,onCloseDialog:l,children:u(U4,{onCancel:l,onSubmit:c,setting:n})})]})},P4=()=>{i.exports.useEffect(()=>{y.fetch()},[]);const n=y.settingList?y.settingList.filter(e=>e.id!==y.SETTING.SETTING_AZIMUTH_SPEED&&e.id!==y.SETTING.SETTING_SLOPE_SPEED).map(e=>u(Ou,{setting:e,editable:!1},e.id)):null;return r(p,{sx:{borderWidth:"1px",borderStyle:"solid",borderColor:"black",borderRadius:"5px",minHeight:"98%",p:.5,m:.5},children:[u(d,{children:"\u0418\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044F \u043E\u0431 \u0443\u0441\u0442\u0440\u043E\u0439\u0441\u0442\u0432\u0435"}),r(p,{sx:{display:"flex",justifyContent:"space-between",px:2,mt:2,color:"blue"},children:[u(d,{variant:"div",children:"\u0412\u0440\u0435\u043C\u044F \u0441\u0435\u0440\u0432\u0435\u0440\u0430"}),u(d,{variant:"div",children:y.serverTime})]}),u(_,{sx:{mb:2},children:n})]})};var M4=I(P4);const Lu=()=>r(D,{children:[u(d,{sx:{color:"red",border:"2px solid red",borderRadius:1,fontWeight:"bold",width:"80%",m:"10px auto",p:1},children:"\u0412\u041D\u0418\u041C\u0410\u041D\u0418\u0415!!! \u041F\u0435\u0440\u0435\u0434 \u0440\u0430\u0431\u043E\u0442\u043E\u0439 \u043F\u0440\u043E\u0432\u0435\u0440\u044C\u0442\u0435 \u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u043E\u0432\u0442\u044C \u0432\u044B\u0441\u0442\u0430\u0432\u043B\u0435\u043D\u043D\u043E\u0433\u043E \u0430\u0437\u0438\u043C\u0443\u0442\u0430 \u0438 \u043D\u0430\u043A\u043B\u043E\u043D\u0430!!!"}),r(p,{sx:{bgcolor:"#f9f9f9",p:1,minHeight:"85%",display:"flex",flexWrap:"wrap",justifyContent:"center"},children:[u(p,{sx:{padding:1,width:{xs:"100%",sm:"45%"},minHeight:"95%"},children:u(R4,{})}),u(p,{sx:{padding:1,width:{xs:"100%",sm:"45%"},minHeight:"95%"},children:u(M4,{})})]})]}),_4=()=>u(D,{children:u(xu,{})}),j4=()=>u(D,{children:u(xu,{})}),G4=({task:n,onSubmit:e,onCancel:t})=>{const s=i.exports.useMemo(()=>b.workTypes.find(x=>x.id===b.WORK.WORK_PROGRAMM),[]),a=i.exports.useMemo(()=>b.statusTypes.find(x=>x.id===b.STATUS.STATUS_RUN),[]),o=i.exports.useMemo(()=>({type:s,status:a,item:n,startTime:null,details:[]}),[]),[l,c]=i.exports.useState(o),[C,m]=i.exports.useState(a),[T,A]=i.exports.useState(iu(new Date,"yyyy-MM-dd'T'HH:mm",{locale:gu})),B=x=>{const O=iu(x,"yyyy-MM-dd'T'HH:mm",{locale:gu}),U=Au(Bu(O));A(O),c(F(g({},l),{startTime:U}))},f=x=>{const O=x.target.value;let U=null;m(O),O.id===b.STATUS.STATUS_WAIT&&(U=Au(Bu(T))),c(F(g({},l),{status:O,startTime:U}))},S=i.exports.useMemo(()=>b.statusTypes.map(x=>(x.id===b.STATUS.STATUS_RUN||x.id===b.STATUS.STATUS_WAIT)&&u(du,{value:x,children:x.name},x.id)),[]);return r(D,{children:[u(eu,{children:u(d,{children:"\u0417\u0430\u0434\u0430\u043D\u0438\u0435"})}),u(tu,{children:r(p,{sx:{display:"flex",flexDirection:"column"},children:[u(J,{fullWidth:!0,sx:H4.gutters,children:u(bu,{autoFocus:!0,value:C,onChange:f,children:S})}),C.id===b.STATUS.STATUS_WAIT&&u(J,{children:u(Qu,{value:T,onChange:B,renderInput:x=>u(K,g({},x))})})]})}),r(nu,{children:[u(h,{onClick:t,children:"\u041E\u0442\u043C\u0435\u043D\u0430"}),u(h,{onClick:()=>e(l),children:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C"})]})]})},H4={gutters:{my:1}};var z4=I(G4);const V4=({task:n,onSelect:e,onRemove:t})=>{const[s,a]=i.exports.useState(!1),o=uu(),l=()=>{a(!0)},c=()=>{a(!1)},C=async m=>{await k.create(m),a(!1),m.status.id===b.STATUS.STATUS_RUN&&o("/works/current-work")};return r(D,{children:[r(z,{sx:{color:"text.primary",mb:.5,p:.2,width:"auto"},children:[r(p,{sx:{display:"flex",bgcolor:"#ffffff",width:"80%",border:"1px solid #001e3c",borderRadius:"2px",cursor:"pointer",flexWrap:"wrap","&:hover":{bgcolor:"#f1f1f1",color:"text.secondary"},alignItems:"center"},onClick:()=>e(n.id),children:[u(d,{variant:"p",component:"span",sx:{width:{xs:"100%",sm:"40%"},padding:1},children:n.name}),u(d,{variant:"p",component:"span",sx:{width:"30%",padding:1,fontSize:"caption.fontSize"},children:n.description}),u(d,{variant:"p",component:"span",sx:{width:{sm:"20%"},padding:1,textAlign:"right"},children:n.ball===0?"\u043B\u0435\u0432\u044B\u0439":"\u043F\u0440\u0430\u0432\u044B\u0439"})]}),r(p,{sx:{display:"flex",flexWrap:{xs:"wrap",sm:"nowrap"},flexGrow:1,justifyContent:"center",ml:1},children:[u(h,{variant:"outlined",size:"small",sx:{mr:{xs:0,sm:.5},mb:{xs:.5,sm:0}},onClick:l,children:"\u0437\u0430\u043F\u0443\u0441\u043A"}),u(h,{variant:"outlined",size:"small",onClick:()=>t(n),children:"\u0443\u0434\u0430\u043B\u0438\u0442\u044C"})]})]}),u(su,{open:s,onCloseDialog:c,children:u(z4,{onCancel:c,onSubmit:C,task:n})})]})};var K4=I(V4);const yu=({open:n,children:e,onOk:t,onCancel:s})=>u(p,{sx:{display:"flex",justifyContent:"space-between",width:"80%",flexWrap:"wrap"},children:r(ku,{open:n,onClose:s,children:[u(eu,{}),u(tu,{children:e}),r(nu,{children:[u(h,{onClick:s,children:"\u041E\u0442\u043C\u0435\u043D\u0430"}),u(h,{onClick:t,children:"Ok"})]})]})}),X4=n=>{const[e,t]=i.exports.useState(!1),[s,a]=i.exports.useState("");return[e,s,l=>{t(l),a(l?n:"")}]},Ru=({open:n,onAddTask:e,onCloseDialog:t,task:s})=>{const[a,o,l]=X4("\u0418\u043C\u044F \u043D\u0435 \u043C\u043E\u0436\u0435\u0442 \u0431\u044B\u0442\u044C \u043F\u0443\u0441\u0442\u044B\u043C."),[c,C]=i.exports.useState("\u041D\u043E\u0432\u0430\u044F \u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u0430"),[m,T]=i.exports.useState(""),[A,B]=i.exports.useState(""),[f,S]=i.exports.useState(""),x=L=>{B(L.target.value)},O=L=>{const w=L.target.value;l(!w),T(L.target.value)},U=L=>{S(L.target.value)},G=()=>{if(!m){l(!0);return}e({name:m,description:A,ball:f})};return i.exports.useEffect(()=>{n&&(s?(T(s.name),B(s.description),S(s.ball),C("\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C \u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u0443")):(T(""),B(""),S(0)),l(!1))},[n]),r(D,{children:[u(eu,{children:u(d,{children:c})}),u(tu,{children:r(p,{sx:{display:"flex",flexDirection:"column"},children:[u(K,{autoFocus:!0,error:a,label:"\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435",value:m,helperText:o,variant:"filled",onChange:O,sx:{mb:1}}),u(K,{label:"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435",value:A,variant:"filled",multiline:!0,maxRows:4,onChange:x,sx:{mb:2}}),r(J,{children:[u(Yu,{id:"ball-label",children:"\u041F\u043E\u0437\u0438\u0446\u0438\u044F \u0448\u0430\u0440\u0430"}),r(bu,{labelId:"ball-label",id:"ball",label:"\u041F\u043E\u0437\u0438\u0446\u0438\u044F \u0448\u0430\u0440\u0430",value:f,onChange:U,children:[u(du,{value:0,children:"\u041B\u0435\u0432\u044B\u0439"}),u(du,{value:1,children:"\u041F\u0440\u0430\u0432\u044B\u0439"})]})]})]})}),r(nu,{children:[u(h,{onClick:t,children:"\u041E\u0442\u043C\u0435\u043D\u0430"}),u(h,{onClick:G,children:s?"\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C":"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C"})]})]})},Z4=()=>{const n=uu(),[e,t]=i.exports.useState(!1),[s,a]=i.exports.useState(!1),[o,l]=i.exports.useState(null),c=i.exports.useCallback(x=>{n(`/tasks/${x}`)},[]);i.exports.useEffect(()=>X.fetch(),[]);const C=i.exports.useCallback(()=>{t(!1)},[]),m=i.exports.useCallback(()=>{t(!0)},[]),T=x=>{l(x),a(!0)},A=()=>{o&&X.remove(o).then(()=>{l(null)}),a(!1)},B=()=>{l(null),a(!1)},f=i.exports.useCallback(x=>{X.create(F(g({},x),{actions:[]})),C()},[]),S=i.exports.useMemo(()=>X.taskList.map(x=>u(K4,{task:x,onSelect:c,onRemove:T},x.id)),[X.taskList]);return r(p,{sx:{bgcolor:"#f9f9f9",padding:1,minHeight:"98%"},children:[r(p,{sx:{display:"flex",justifyContent:"space-between",width:"80%",flexWrap:"wrap"},children:[u(d,{variant:"h5",children:"\u0421\u043F\u0438\u0441\u043E\u043A \u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C"}),u(h,{variant:"contained",color:"primary",onClick:m,children:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C"})]}),u(_,{children:S}),u(su,{open:e,onCloseDialog:C,children:u(Ru,{open:e,onAddTask:f,onCloseDialog:C})}),r(yu,{open:s,onOk:A,onCancel:B,children:[u(d,{sx:{mb:2},children:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0432\u044B\u0431\u0440\u0430\u043D\u043D\u0443\u044E \u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u0443?"}),u(d,{align:"center",sx:{fontWeight:"bold"},children:o==null?void 0:o.name})]})]})};var q4=I(Z4);const Nu=(n,e="#f1f1f1")=>i.exports.useMemo(()=>{switch(n.id){case b.STATUS.STATUS_RUN:return"#ffffe6";case b.STATUS.STATUS_DONE:return"#e8ffe6";case b.STATUS.STATUS_EXPIRED:case b.STATUS.STATUS_STOPPED:return"#ffe6e7";default:return e}},[n]),J4=({work:n,onRemove:e})=>{const t=Nu(n.status),s=n.startTime?iu(n.startTime,"dd-MM-yyyy - HH:mm"):null,a=uu(),o=n.status.id===b.STATUS.STATUS_RUN?"pointer":"default";return r(z,{sx:{color:"text.primary",mb:.5,p:.2,width:"auto"},children:[r(p,{sx:{display:"flex",width:"80%",border:"1px solid #001e3c",borderRadius:"2px",cursor:()=>o,flexWrap:"wrap",bgcolor:t},onClick:()=>{n.status.id===b.STATUS.STATUS_RUN&&a("/works/current-work")},children:[u(d,{variant:"p",component:"span",sx:{width:{xs:"100%",sm:"20%"},padding:1},children:n.status.name}),u(d,{variant:"p",component:"span",sx:{width:{xs:"100%",sm:"40%"},padding:1},children:n.item.name}),r(d,{variant:"p",component:"span",sx:{width:{xs:"100%",sm:"20%"},padding:1},children:[!!s&&s,!s&&"\u043D\u0435\u043C\u0435\u0434\u043B\u0435\u043D\u043D\u043E"]})]}),u(p,{sx:{display:"flex",flexWrap:{xs:"wrap",sm:"nowrap"},flexGrow:1,justifyContent:"center",ml:1},children:u(h,{variant:"outlined",size:"small",onClick:()=>e(n),children:"\u0443\u0434\u0430\u043B\u0438\u0442\u044C"})})]})};var Q4=I(J4);const Y4=()=>{var C,m;uu();const[n,e]=i.exports.useState(!1),[t,s]=i.exports.useState(null);i.exports.useEffect(()=>k.fetch(),[]);const a=T=>{s(T),e(!0)},o=()=>{t&&k.remove(t).then(()=>{s(null)}),e(!1)},l=()=>{s(null),e(!1)},c=i.exports.useMemo(()=>k.workList.map(T=>u(Q4,{work:T,onRemove:a},T.id)),[k.workList]);return r(p,{sx:{bgcolor:"#f9f9f9",padding:1,minHeight:"98%"},children:[u(p,{sx:{display:"flex",justifyContent:"space-between",width:"80%",flexWrap:"wrap"},children:u(d,{variant:"h5",children:"\u0421\u043F\u0438\u0441\u043E\u043A \u0443\u0441\u0442\u0430\u043D\u043E\u0432\u043B\u0435\u043D\u043D\u044B\u0445 \u0437\u0430\u0434\u0430\u0447"})}),u(_,{children:c}),r(yu,{open:n,onOk:o,onCancel:l,children:[u(d,{sx:{mb:2},children:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0432\u044B\u0431\u0440\u0430\u043D\u043D\u0443\u044E \u0437\u0430\u0434\u0430\u0447\u0443?"}),r(d,{align:"center",sx:{fontWeight:"bold"},children:[(C=t==null?void 0:t.status)==null?void 0:C.name," ",(m=t==null?void 0:t.item)==null?void 0:m.name]})]})]})};var ue=I(Y4);const ee=({work:n})=>{const e=Nu(n.status);let t="";switch(n.type.id){case b.ACTION.ACTION_AZIMUTH:case b.ACTION.ACTION_SLOPE:t=n.value1+" \u0433\u0440\u0430\u0434.";break;case b.ACTION.ACTION_WAIT:t=n.value1+" \u0441\u0435\u043A.";break;case b.ACTION.ACTION_SPARK:t=n.value2+" \u0441\u0435\u043A.";break}return u(D,{children:r(z,{sx:{justifyContent:"space-between",flexWrap:"wrap",bgcolor:e,mb:1},children:[u(d,{sx:{width:{xs:"100%",sm:"15%",md:"15%"},fontWeight:"bold"},children:n.type.name}),u(d,{sx:{width:{xs:"100%",sm:"15%",md:"15%"},textAlign:{xs:"left",sm:"center"}},children:t})," ",u(d,{sx:{width:{xs:"100%",sm:"20%"},textAlign:{xs:"left",sm:"right"},fontWeight:"bold"},children:n.status.name})]},n.id)})},te=()=>{var s;const n=i.exports.useCallback(()=>{k.stopCurrent()},[]);i.exports.useEffect(()=>{k.fetchCurrentWork()},[]);let e=null;const t=(s=k.currentWork)==null?void 0:s.work;return t&&(e=t.details.map(a=>u(ee,{work:a},a.id))),r(D,{children:[r(p,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",bgcolor:"#cdcdcd",px:1},children:[u(d,{variant:"h6",children:"\u0422\u0435\u043A\u0443\u0449\u0430\u044F \u0437\u0430\u0434\u0430\u0447\u0430"}),u(p,{children:u(h,{variant:"contained",color:"primary",onClick:n,sx:{m:1},children:"\u041E\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u044C"})})]}),!e&&u(p,{sx:{my:10,fontWeight:"bold",display:"flex",width:"100%",justifyContent:"center",alignItems:"center"},children:"\u041D\u0435\u0442 \u0442\u0435\u043A\u0443\u0449\u0435\u0439 \u0437\u0430\u0434\u0430\u0447\u0438"}),u(_,{children:e})]})};var ne=I(te);const se=o=>{var l=o,{action:n,onRemove:e,onEdit:t,innerRef:s}=l,a=vu(l,["action","onRemove","onEdit","innerRef"]);return r(z,F(g({ref:s},a),{sx:{color:"text.primary",mb:.5,p:.2,width:"auto"},children:[r(p,{sx:{display:"flex",bgcolor:"#ffffff",width:"80%",border:"1px solid #001e3c",borderRadius:"2px",flexWrap:"wrap",cursor:"pointer","&:hover":{bgcolor:"#f1f1f1",color:"text.secondary"}},onClick:()=>t(n),children:[u(d,{variant:"p",component:"span",sx:{width:{xs:"100%",sm:"40%"},padding:1},children:n.type.name}),r(d,{variant:"p",component:"span",sx:{padding:1},children:[n.type.id===1&&r(d,{children:["\u0430\u0437\u0438\u043C\u0443\u0442 ",u("span",{children:n.value1})," \u0433\u0440\u0430\u0434\u0443\u0441\u043E\u0432"]}),n.type.id===2&&r(d,{children:["\u043D\u0430\u043A\u043B\u043E\u043D ",u("span",{children:n.value1})," \u0433\u0440\u0430\u0434\u0443\u0441\u043E\u0432"]}),n.type.id===3&&r(d,{children:["\u043E\u0436\u0438\u0434\u0430\u043D\u0438\u0435 ",u("span",{children:n.value1})," \u0441\u0435\u043A"]}),n.type.id===4&&r(d,{children:["\u0440\u0430\u0437\u0440\u044F\u0434 \u043A\u043E\u043B-\u0432\u043E ",u("span",{children:n.value1})," \u0432\u0440\u0435\u043C\u044F\xA0",u("span",{children:n.value2})," \u0441\u0435\u043A \u0438\u043D\u0442\u0435\u0440\u0432\u0430\u043B\xA0",u("span",{children:n.value3})," \u0441\u0435\u043A"]})]})]}),u(p,{sx:{display:"flex",flexWrap:{xs:"wrap",sm:"nowrap"},flexGrow:1,justifyContent:"center",ml:1},children:u(h,{variant:"outlined",size:"small",onClick:()=>e(n),children:"\u0443\u0434\u0430\u043B\u0438\u0442\u044C"})})]}))};var re=I(se);const ae=({action:n,onSubmit:e,onCloseDialog:t})=>{const s=i.exports.useMemo(()=>({id:b.actionTypes[0].id,name:b.actionTypes[0].name}),[]),a=i.exports.useMemo(()=>({id:null,type:s,value1:0,value2:0,value3:0}),[]),[o,l]=i.exports.useState(n||a),[c,C]=i.exports.useState(()=>b.actionTypes.find(f=>f.id===o.type.id)),m=f=>{let S=f.target.value;o.type.id!==b.ACTION.ACTION_SLOPE&&(S=S.replace(/-/g,""));let x={};switch(f.target.dataset.source){case"value1":x={value1:S};break;case"value2":x={value2:S};break;case"value3":x={value3:S};break}l(()=>g(g({},o),x))},T=f=>{const S=f.target.value;C(S),l(F(g({},o),{type:{id:S.id,name:S.name},value1:0,value2:0,value3:0}))},A=i.exports.useMemo(()=>b.actionTypes.map(f=>u(du,{value:f,children:f.name},f.id)),[]),B=()=>{const f=g({},o);return f.value1=f.type.id===b.ACTION.ACTION_SPARK?Number(String(f.value1).split(".")[0]):Number((+f.value1).toFixed(1)),f.value2=Number((+f.value2).toFixed(1)),f.value3=Number((+f.value3).toFixed(1)),g({},f)};return r(D,{children:[u(eu,{children:u(d,{children:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0435"})}),u(tu,{children:r(p,{sx:{display:"flex",flexDirection:"column"},children:[u(J,{fullWidth:!0,sx:hu.gutters,children:u(bu,{autoFocus:!0,value:c,onChange:T,children:A})}),u(J,{fullWidth:!0,children:u(K,{label:c.value1.label,value:o.value1,onChange:m,type:"number",inputProps:{"data-source":"value1",max:c.value1.max,min:c.value1.min,step:c.value1.step},sx:hu.gutters,InputLabelProps:{shrink:!0}})}),c.id===b.ACTION.ACTION_SPARK&&u(K,{label:c.value2.label,value:o.value2,onChange:m,type:"number",inputProps:{"data-source":"value2",max:c.value2.max,min:c.value2.min,step:c.value2.step},sx:hu.gutters,InputLabelProps:{shrink:!0}}),c.id===b.ACTION.ACTION_SPARK&&u(K,{label:c.value3.label,value:o.value3,onChange:m,type:"number",inputProps:{"data-source":"value3",max:c.value3.max,min:c.value3.min,step:c.value3.step},sx:hu.gutters,InputLabelProps:{shrink:!0}})]})}),r(nu,{children:[u(h,{onClick:t,children:"\u041E\u0442\u043C\u0435\u043D\u0430"}),u(h,{onClick:()=>e(B()),children:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C"})]})]})},hu={gutters:{my:1}};var ie=I(ae);const oe=()=>{var Eu;const n=u4(),e=uu(),[t,s]=i.exports.useState(!1),[a,o]=i.exports.useState(null),[l,c]=i.exports.useState({}),[C,m]=i.exports.useState(!1),[T,A]=i.exports.useState(null),[B,f]=i.exports.useState(!1),S=i.exports.useCallback(()=>{e("/tasks")},[]);i.exports.useEffect(()=>{X.fetchById(n.id).then(E=>c(E))},[]);const x=i.exports.useCallback(()=>{s(!1)},[]),O=i.exports.useCallback(E=>{o(E),s(!0)},[]),U=i.exports.useCallback(()=>{o(null),s(!0)},[]),G=E=>{A(E),m(!0)},L=()=>{if(T){const E=l.actions.filter($=>T.id!==$.id),R=F(g({},l),{actions:E});c(R),X.update(R).then(()=>{A(null)})}m(!1)},w=()=>{A(null),m(!1)},W=E=>{E.id||(E.id=s4());const R=l.actions.findIndex(mu=>mu.id===E.id),$=[...l.actions];R===-1?$.push(E):$[R]=g({},E);const q=F(g({},l),{actions:[...$]});c(q),s(!1),X.update(q)},M=Array.isArray(l.actions)?l.actions.map((E,R)=>u(e4,{draggableId:E.id,index:R,children:$=>u(re,F(g(g({innerRef:$.innerRef},$.draggableProps),$.dragHandleProps),{action:E,onRemove:G,onEdit:O}))},E.id)):null,Y=E=>{if(!E.destination)return;const R=H(l.actions,E.source.index,E.destination.index),$=F(g({},l),{actions:R});c($),X.update($)},H=i.exports.useCallback((E,R,$)=>{const q=Array.from(E),[mu]=q.splice(R,1);return q.splice($,0,mu),q},[]),Z=({name:E,description:R,ball:$})=>{const q=F(g({},l),{name:E,description:R,ball:$});c(q),f(!1),X.update(q)},ru=i.exports.useCallback(()=>{f(!1)},[]);return r(p,{sx:{bgcolor:"#f9f9f9",padding:1,minHeight:"98%"},children:[r(p,{sx:{display:"flex",justifyContent:"space-between",width:"80%",flexWrap:"wrap"},children:[u(d,{variant:"h5",children:"\u0421\u043E\u0441\u0442\u0430\u0432 \u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u044B"}),r(p,{children:[u(h,{variant:"contained",color:"primary",onClick:S,sx:{mr:1},children:"\u041A \u0441\u043F\u0438\u0441\u043A\u0443"}),u(h,{variant:"contained",color:"primary",onClick:U,children:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C"})]})]}),r(p,{sx:{display:"flex",justifyContent:"start"},children:[u(h,{color:"primary",onClick:()=>f(!0),sx:{mr:1},children:"\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C"}),r(d,{variant:"h6",sx:{fontStyle:"italic",color:"blue",my:1},children:[`\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435: ${l.name||""}`," ",u("br",{}),`\u041F\u043E\u0437\u0438\u0446\u0438\u044F \u0448\u0430\u0440\u0430: ${l.ball===0?"\u043B\u0435\u0432\u044B\u0439":"\u043F\u0440\u0430\u0432\u044B\u0439"}`]})]}),M&&M.length<=0&&u(p,{sx:{my:10,fontWeight:"bold",display:"flex",width:"100%",justifyContent:"center",alignItems:"center"},children:"\u0421\u043F\u0438\u0441\u043E\u043A \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0439 \u043F\u0443\u0441\u0442"}),u(t4,{onDragEnd:Y,children:u(n4,{droppableId:"program",children:E=>r(_,F(g({className:"program",ref:E.innerRef},E.droppableProps),{children:[M,E.placeholder]}))})}),u(su,{open:t,onCloseDialog:x,children:u(ie,{open:t,onCloseDialog:x,onSubmit:W,action:a})}),r(yu,{open:C,onOk:L,onCancel:w,children:[u(d,{sx:{mb:2},children:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0432\u044B\u0431\u0440\u0430\u043D\u043D\u043E\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435?"}),u(d,{align:"center",sx:{fontWeight:"bold"},children:(Eu=T==null?void 0:T.type)==null?void 0:Eu.name})]}),u(su,{open:B,onCloseDialog:ru,children:u(Ru,{task:l,open:B,onAddTask:Z,onCloseDialog:ru})})]})};var le=I(oe);const ce=()=>{i.exports.useEffect(()=>{y.fetch()},[]);const n=t=>{y.update(g({},t))},e=y.settingList.map(t=>{let s=!0;return(t.id===y.SETTING.SETTING_VERSION||t.id===y.SETTING.SETTING_BALL)&&(s=!1),u(Ou,{setting:t,onEdit:n,editable:s},t.id)});return u(D,{children:u(_,{sx:{mb:2},children:e})})};var de=I(ce);const pe=({openDialog:n,openBallDialog:e,openConfirm:t,disableAll:s})=>r(D,{children:[u(h,{disabled:s,variant:"contained",color:"primary",onClick:()=>{t("update")},sx:{mr:1,mb:1},children:"\u041E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u0435 \u0441\u0435\u0440\u0432\u0435\u0440\u0430"}),u(h,{disabled:s,variant:"contained",color:"primary",onClick:()=>{t("shutdown")},sx:{mr:1,mb:1},children:"\u0412\u044B\u043A\u043B\u044E\u0447\u0438\u0442\u044C \u0443\u0441\u0442\u0440\u043E\u0439\u0441\u0442\u0432\u043E"}),u(h,{disabled:s,variant:"contained",color:"primary",onClick:()=>{t("restart")},sx:{mr:1,mb:1},children:"\u0420\u0435\u0441\u0442\u0430\u0440\u0442"}),u(h,{disabled:s,variant:"contained",color:"primary",onClick:()=>{n("azimuth")},sx:{mr:1,mb:1},children:"\u041A\u0430\u043B\u0438\u0431\u0440\u043E\u0432\u043A\u0430 \u0430\u0437\u0438\u043C\u0443\u0442\u0430"}),u(h,{disabled:s,variant:"contained",color:"primary",onClick:()=>{n("slope")},sx:{mr:1,mb:1},children:"\u041A\u0430\u043B\u0438\u0431\u0440\u043E\u0432\u043A\u0430 \u043D\u0430\u043A\u043B\u043E\u043D\u0430"}),u(h,{disabled:s,variant:"contained",color:"primary",onClick:()=>{e()},sx:{mr:1,mb:1},children:"\u041F\u043E\u0437\u0438\u0446\u0438\u044F \u0448\u0430\u0440\u0430"})]}),he=[{description:'\u0423\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u0435 \u0443\u0441\u0442\u0440\u043E\u0439\u0441\u0442\u0432\u043E \u043D\u0430 \u0430\u0437\u0438\u043C\u0443\u0442 0 \u0438 \u043D\u0430\u0436\u043C\u0438\u0442\u0435 "\u0414\u0430\u043B\u0435\u0435".',time:0},{description:`\u041F\u043E\u0432\u043E\u0440\u043E\u0442 \u043F\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C\u044E 5 \u0441\u0435\u043A. \u041F\u043E\u0441\u043B\u0435 \u043E\u0441\u0442\u0430\u043D\u043E\u0432\u043A\u0438 \u0432\u0432\u0435\u0434\u0438\u0442\u0435
                  \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0430\u0437\u0438\u043C\u0443\u0442\u0430.`,time:5},{description:`\u041F\u043E\u0432\u043E\u0440\u043E\u0442 \u043F\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C\u044E 10 \u0441\u0435\u043A. \u041F\u043E\u0441\u043B\u0435 \u043E\u0441\u0442\u0430\u043D\u043E\u0432\u043A\u0438 \u0432\u0432\u0435\u0434\u0438\u0442\u0435
                  \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0430\u0437\u0438\u043C\u0443\u0442\u0430.`,time:10},{description:`\u041F\u043E\u0432\u043E\u0440\u043E\u0442 \u043F\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C\u044E 15 \u0441\u0435\u043A. \u041F\u043E\u0441\u043B\u0435 \u043E\u0441\u0442\u0430\u043D\u043E\u0432\u043A\u0438 \u0432\u0432\u0435\u0434\u0438\u0442\u0435
                  \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0430\u0437\u0438\u043C\u0443\u0442\u0430.`,time:15}],me=[{description:'\u0423\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u0435 \u043D\u0430\u043A\u043B\u043E\u043D \u0443\u0441\u0442\u0440\u043E\u0439\u0441\u0442\u0432\u0430 \u043D\u0430 0 \u0438 \u043D\u0430\u0436\u043C\u0438\u0442\u0435 "\u0414\u0430\u043B\u0435\u0435".',time:0},{description:`\u041D\u0430\u043A\u043B\u043E\u043D \u043F\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C\u044E 2 \u0441\u0435\u043A. \u041F\u043E\u0441\u043B\u0435 \u043E\u0441\u0442\u0430\u043D\u043E\u0432\u043A\u0438 \u0432\u0432\u0435\u0434\u0438\u0442\u0435
                  \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0443\u0433\u043B\u0430 \u043D\u0430\u043A\u043B\u043E\u043D\u0430.`,time:2},{description:`\u041D\u0430\u043A\u043B\u043E\u043D \u043F\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C\u044E 4 \u0441\u0435\u043A. \u041F\u043E\u0441\u043B\u0435 \u043E\u0441\u0442\u0430\u043D\u043E\u0432\u043A\u0438 \u0432\u0432\u0435\u0434\u0438\u0442\u0435
                  \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0443\u0433\u043B\u0430 \u043D\u0430\u043A\u043B\u043E\u043D\u0430.`,time:4},{description:`\u041D\u0430\u043A\u043B\u043E\u043D \u043F\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C\u044E 6 \u0441\u0435\u043A. \u041F\u043E\u0441\u043B\u0435 \u043E\u0441\u0442\u0430\u043D\u043E\u0432\u043A\u0438 \u0432\u0432\u0435\u0434\u0438\u0442\u0435
                  \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0443\u0433\u043B\u0430 \u043D\u0430\u043A\u043B\u043E\u043D\u0430.`,time:6}],fe=({onCancel:n,mode:e})=>{const[t,s]=i.exports.useState(0),[a,o]=i.exports.useState(!1);let l="",c=[];switch(e){case"azimuth":l="\u041A\u0430\u043B\u0438\u0431\u0440\u043E\u0432\u043A\u0430 \u0430\u0437\u0438\u043C\u0443\u0442\u0430",c=he;break;case"slope":l="\u041A\u0430\u043B\u0438\u0431\u0440\u043E\u0432\u043A\u0430 \u043D\u0430\u043A\u043B\u043E\u043D\u0430",c=me;break}const C=c.length,[m,T]=i.exports.useState(new Array(C).fill(0)),[A,B]=i.exports.useState(new Array(C).fill(0)),f=(w,W=3)=>Number(w.toFixed(W)),S=()=>{k.stopCurrent(),o(!0);const w=c[t].time;let W=()=>{};switch(e){case"azimuth":W=y.calibrateAzimuth;break;case"slope":W=y.calibrateSlope;break}W(w)},x=()=>{k.stopCurrent(),n()},O=w=>{const W=+w.target.value,M=[...m],Y=[...A];M[t]=W;let H=f((W-M[t-1])/c[t].time);H=H<=0?0:H,Y[t]=H,T(M),B(Y)},U=()=>{k.stopCurrent();const w=[0];for(let Z=1;Z<c.length;Z++){const ru=f((m[Z]-m[Z-1])/c[Z].time);w.push(ru)}const W=w.reduce((Z,ru)=>Z+ru),M=f(W/(c.length-1));let Y={},H={};switch(e){case"azimuth":Y=F(g({},y.settingList[0]),{value:M}),H=F(g({},y.settingList[2]),{value:m[m.length-1]});break;case"slope":Y=F(g({},y.settingList[1]),{value:M}),H=F(g({},y.settingList[3]),{value:m[m.length-1]});break}M>0&&(y.update(Y),y.update(H)),n()},G=()=>{s(w=>w+1),o(!1)},L=()=>{s(w=>w-1),o(!1)};return r(D,{children:[u(eu,{children:u(d,{children:l})}),u(tu,{children:r(p,{sx:{display:"flex",flexDirection:"column"},children:[u(p,{sx:{p:2},children:c[t].description}),t!==0&&r(J,{children:[u(h,{onClick:S,variant:"contained",color:"primary",disabled:a,sx:{width:{md:"50%",xl:"25%"},mb:1,ml:1},children:"\u0421\u0442\u0430\u0440\u0442"}),u(K,{sx:{m:1},label:"\u0417\u043D\u0430\u0447\u0435\u043D\u0438\u0435",type:"number",inputProps:{max:350,min:0,step:.1},value:m[t],onChange:O,InputLabelProps:{shrink:!0}}),r(d,{sx:{mx:1},children:["\u0421\u043A\u043E\u0440\u043E\u0441\u0442\u044C: ",A[t]]})]}),u(r4,{sx:{justifySelf:"flex-end"},variant:"text",steps:C,position:"static",activeStep:t,nextButton:r(h,{size:"small",onClick:G,disabled:t===C-1,children:["\u0414\u0430\u043B\u0435\u0435",u(a4,{})]}),backButton:r(h,{size:"small",onClick:L,disabled:t===0,children:[u(i4,{}),"\u041D\u0430\u0437\u0430\u0434"]})})]})}),r(nu,{children:[u(h,{onClick:x,children:"\u041E\u0442\u043C\u0435\u043D\u0430"}),u(h,{onClick:U,children:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C"})]})]})},xe=({onCancel:n})=>{const[e,t]=i.exports.useState(.2),[s,a]=i.exports.useState(!1);return r(D,{children:[u(eu,{children:u(d,{children:"\u0423\u0441\u0442\u0430\u043D\u043E\u0432\u043A\u0430 \u043F\u043E\u0437\u0438\u0446\u0438\u0438 \u0448\u0430\u0440\u0430"})}),u(tu,{children:r(p,{sx:{display:"flex",width:"100%"},children:[" ",r(J,{sx:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-between"},children:[u(h,{onClick:async()=>{a(!0),await y.rotateCCW(e),a(!1)},children:"\u043F\u0440\u043E\u0442\u0438\u0432 \u0447\u0430\u0441\u043E\u0432\u043E\u0439"}),u(K,{autoFocus:!0,sx:{m:1,width:"40%"},label:"\u0417\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0443\u0433\u043B\u0430 \u043F\u043E\u0432\u043E\u0440\u043E\u0442\u0430",type:"number",inputProps:{max:2,min:.2,step:.1},value:e,onChange:C=>{let m=C.target.value;t(m)},InputLabelProps:{shrink:!0}}),u(h,{onClick:async()=>{a(!0),await y.rotateCW(e),a(!1)},children:"\u043F\u043E \u0447\u0430\u0441\u043E\u0432\u043E\u0439"})]})]})}),u(nu,{children:u(h,{onClick:n,children:"\u041E\u0442\u043C\u0435\u043D\u0430"})})]})};var Ce=I(xe);const ge=({disableAll:n})=>{const e=i.exports.useRef();return u(D,{children:r(p,{sx:{display:"flex",width:"100%",flexWrap:"wrap"},children:[u(h,{disabled:n,variant:"contained",color:"primary",onClick:()=>{y.backup()},sx:{mr:1,mb:1},children:"\u0420\u0435\u0437\u0435\u0440\u0432\u043D\u0430\u044F \u043A\u043E\u043F\u0438\u044F \u0411\u0414"}),u(p,{children:r("label",{htmlFor:"upload",children:[u("input",{ref:e,style:{display:"none"},id:"upload",name:"upload",type:"file",onInput:async a=>{await y.restore(a.target.files[0])}}),u(h,{disabled:n,variant:"contained",color:"primary",component:"span",sx:{mr:1,mb:1},children:"\u0412\u043E\u0441\u0441\u0442\u0430\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u0435 \u0411\u0414"})]})})]})})},be=()=>{const[n,e]=i.exports.useState(!1),[t,s]=i.exports.useState(!1),[a,o]=i.exports.useState(!1),[l,c]=i.exports.useState("azimuth"),[C,m]=i.exports.useState(""),[T,A]=i.exports.useState(""),[B,f]=i.exports.useState(!1),S=w=>{c(w),e(!0)},x=()=>{s(!0)},O=w=>{m(w);let W="";switch(w){case"update":W=`\u041E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u0435 \u0437\u0430\u0439\u043C\u0435\u0442 3-5 \u043C\u0438\u043D\u0443\u0442.
                   \u0412 \u044D\u0442\u043E \u0432\u0440\u0435\u043C\u044F \u0441\u0435\u0440\u0432\u0435\u0440 \u0431\u0443\u0434\u0435\u0442 \u043D\u0435\u0434\u043E\u0441\u0442\u0443\u043F\u0435\u043D.
                   \u041D\u0435 \u043E\u0442\u043A\u043B\u044E\u0447\u0430\u0439\u0442\u0435 \u0443\u0441\u0442\u0440\u043E\u0439\u0441\u0442\u0432\u043E \u043E\u0442 \u043F\u0438\u0442\u0430\u043D\u0438\u044F.

                   \u041F\u0440\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u044C?
        `;break;case"shutdown":W=`\u0412\u044B\u043A\u043B\u044E\u0447\u0438\u0442\u044C \u0441\u0435\u0440\u0432\u0435\u0440?
        `;break;case"restart":W=`\u041F\u0435\u0440\u0435\u0437\u0430\u043F\u0443\u0441\u0442\u0438\u0442\u044C \u0441\u0435\u0440\u0432\u0435\u0440?
        `;break}A(()=>W),o(!0),f(!0)},U=()=>{let w=()=>{};switch(C){case"update":w=y.updateServer;break;case"shutdown":w=y.shutdown;break;case"restart":w=y.restart;break}w(),o(!1)},G=()=>{e(!1),s(!1)},L=()=>{o(!1),f(!1)};return r(D,{children:[u(d,{variant:"h6",children:"\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438"}),u(de,{}),u(pe,{openDialog:S,openBallDialog:x,openConfirm:O,disableAll:B}),u(ge,{disableAll:B}),u(su,{open:n,onCloseDialog:G,children:u(fe,{onCancel:G,mode:l})}),u(su,{open:t,onCloseDialog:G,children:u(Ce,{onCancel:G})}),r(su,{open:a,onCloseDialog:L,children:[u(eu,{children:u(d,{children:"\u041F\u043E\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043D\u0438\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044F"})}),u(tu,{children:T}),r(nu,{children:[u(h,{onClick:L,children:"\u041E\u0442\u043C\u0435\u043D\u0430"}),u(h,{onClick:U,children:"Ok"})]})]})]})},ye=()=>r(D,{children:[u(d,{sx:{color:"red",border:"2px solid red",borderRadius:1,fontWeight:"bold",width:"80%",m:"10px auto",p:1},children:"\u0420\u0435\u043C\u043E\u043D\u0442"}),u(p,{sx:{bgcolor:"#f9f9f9",p:1,display:"flex",flexWrap:"wrap",justifyContent:"center"},children:u(h,{variant:"contained",color:"primary",onClick:()=>{y.repair()},children:"\u0421\u0442\u0430\u0440\u0442"})})]});var Ee=I(ye);const Q="/",we=({routes:n})=>u(D,{children:u(o4,{children:u(v4,{children:u(l4,{children:r(j,{path:`${Q}`,element:u(y4,{}),children:[u(j,{path:`${Q}`,element:u(Lu,{})}),u(j,{path:`${Q}remont`,element:u(Ee,{})}),r(j,{path:`${Q}tasks`,element:u(_4,{}),children:[u(j,{path:`${Q}tasks`,element:u(q4,{})}),u(j,{path:`${Q}tasks:id`,element:u(le,{})})]}),r(j,{path:`${Q}works`,element:u(j4,{}),children:[u(j,{path:`${Q}works`,element:u(ue,{})}),u(j,{path:"/works/current-work",element:u(ne,{})})]}),u(j,{path:`${Q}settings`,element:u(be,{})}),u(j,{path:"*",element:u(Lu,{})})]})})})})});const ou=c4(`ws://${location.hostname}`);ou.on("connect",()=>{console.log("socket ",ou.connected)});ou.on("workStatusUpdate",n=>{k.fetch(),k.fetchCurrentWork(n)});ou.on("serverTime",n=>{y.setServerTime(+n)});ou.on("settingsUpdate",n=>{y.fetch()});const Te=d4({palette:{primary:{main:"#1976d2"},bgGray:{main:"#f9f9f9"}}},p4);h4.render(u(m4.StrictMode,{children:u(f4,{theme:Te,children:u(x4,{dateAdapter:C4,locale:gu,children:u(we,{})})})}),document.getElementById("root"));
