var Uu=Object.defineProperty,Mu=Object.defineProperties;var _u=Object.getOwnPropertyDescriptors;var ou=Object.getOwnPropertySymbols;var bu=Object.prototype.hasOwnProperty,Eu=Object.prototype.propertyIsEnumerable;var mu=(n,e,t)=>e in n?Uu(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,C=(n,e)=>{for(var t in e||(e={}))bu.call(e,t)&&mu(n,t,e[t]);if(ou)for(var t of ou(e))Eu.call(e,t)&&mu(n,t,e[t]);return n},I=(n,e)=>Mu(n,_u(e));var Tu=(n,e)=>{var t={};for(var s in n)bu.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&ou)for(var s of ou(n))e.indexOf(s)<0&&Eu.call(n,s)&&(t[s]=n[s]);return t};var N=(n,e,t)=>(mu(n,typeof e!="symbol"?e+"":e,t),t);import{s as Pu,j as u,O as fu,d as ju,a as Gu,b as Hu,c as zu,u as V,L as j,e as Su,A as Ku,C as xu,f as r,T as Vu,g as d,B as p,h as M,I as vu,i as Xu,k as Zu,D as qu,l as Ju,r as o,m as X,n as lu,o as au,p as $,F as D,q as f,t as wu,v as Q,w as Y,x as su,y as Z,z as uu,E as Cu,M as Du,S as ku,G as Qu,H as Au,J as Bu,K as Yu,P as ue,N as ee,Q as te,R as ne,U as se,V as re,W as ae,X as ie,Y as oe,Z as _,_ as le,$ as ce,a0 as de,a1 as pe,a2 as he,a3 as me,a4 as fe,a5 as xe}from"./vendor.c808e3be.js";const Ce=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function t(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerpolicy&&(i.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?i.credentials="include":a.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(a){if(a.ep)return;a.ep=!0;const i=t(a);fetch(a.href,i)}};Ce();const ge=Pu("main")({flexGrow:1,margin:10}),ye=()=>u(ge,{children:u(fu,{})}),cu="/";var Wu=[{label:"\u0413\u043B\u0430\u0432\u043D\u0430\u044F",path:`${cu}`,icon:u(ju,{color:"primary"})},{label:"\u041F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u044B",path:`${cu}tasks`,icon:u(Gu,{color:"primary"})},{label:"\u0417\u0430\u0434\u0430\u0447\u0438",path:`${cu}works`,icon:u(Hu,{color:"primary"})},{label:"\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438",path:`${cu}settings`,icon:u(zu,{color:"primary"})}];const Iu="Pulsar",be=({toggleOpen:n})=>{const e=V(),t=Wu.map(s=>u(j,{button:!0,onClick:()=>e(s.path,{replace:!0}),children:u(Su,{primary:s.label})},s.label));return u(Ku,{position:"fixed",children:u(xu,{maxWidth:"xl",children:r(Vu,{disableGutters:!0,children:[u(d,{variant:"h6",noWrap:!0,component:"h1",sx:ru.logoSm,children:Iu}),u(p,{sx:ru.menu,children:u(M,{component:"nav",sx:ru.nav,children:t})}),u(p,{sx:ru.icon,children:u(vu,{size:"large","aria-label":"open menu","aria-controls":"menu-appbar","aria-haspopup":"true",color:"inherit",onClick:n,sx:ru.iconButton,children:u(Xu,{})})}),u(d,{variant:"h6",noWrap:!0,component:"h1",sx:ru.logoXs,children:Iu})]})})})},ru={logoSm:{mr:2,display:{xs:"none",sm:"flex"}},logoXs:{flexGrow:1,justifyContent:"flex-end",display:{xs:"flex",sm:"none"}},menu:{flexGrow:1,justifyContent:"flex-end",display:{xs:"none",sm:"flex"}},nav:{display:"flex",flexDirection:"row"},iconButton:{padding:"20px"},icon:{display:{xs:"flex",sm:"none"}}},Ee=({open:n,toggleOpen:e})=>{const t=V(),s=i=>{t(i,{replace:!0}),e()},a=Wu.map(i=>r(j,{button:!0,onClick:()=>s(i.path),children:[u(Zu,{children:i.icon}),u(Su,{primary:i.label})]},i.label));return r(qu,{sx:Fu.drawer,open:n,onClose:e,children:[r(p,{sx:{display:{xs:"flex",sm:"none"}},children:[u(d,{children:"Pulsar"}),u(vu,{size:"large","aria-label":"open menu","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:e,sx:Fu.closeButton,children:u(Ju,{})})]}),u(M,{component:"nav",children:a})]})},Fu={drawer:{width:300,"& .MuiDrawer-paper":{width:300,boxSizing:"border-box",top:"auto",padding:"10px 10px"}},closeButton:{color:"text.secondary"}},Te=n=>{const[e,t]=o.exports.useState(!!n);return[e,()=>{t(()=>!e)}]},Se=({children:n})=>{const[e,t]=Te(!1);return r(xu,{maxWidth:"100vw",disableGutters:!0,sx:$u.container,children:[u(be,{toggleOpen:t}),r(xu,{sx:$u.content,disableGutters:!0,children:[u(Ee,{open:e,toggleOpen:t}),n]})]})},$u={container:{display:"flex",flexDirection:"column",minHeight:"100vh"},content:{display:"flex",flexGrow:1,mt:8}},q=`${location.protocol}//${location.hostname}`;class ve{async fetch(e){return(await X.get(`${q}/${e}`)).data}async fetchById(e,t){return(await X.get(`${q}/${e}/${t}`)).data}async create(e,t){return(await X.post(`${q}/${e}`,t)).data}async remove(e,t){return(await X.delete(`${q}/${e}/${t}`)).data}async update(e,t){return(await X.put(`${q}/${e}/${t.id}`,t)).data}async repair(e){return await X.post(`${q}/${e}`)}async backup(e){await X({url:`${q}/${e}`,method:"GET",responseType:"blob"}).then(t=>{const s=t.headers["content-type"],a=new Blob([t.data],{type:s,encoding:"UTF-8"}),i=document.createElement("a"),l=t.headers["content-disposition"].split("filename=")[1].replace(/"/g,"");i.href=window.URL.createObjectURL(a),i.download=l,i.click()})}async restore(e,t){const s={result:null,error:null};let a=null;try{if(a=JSON.parse(t),!a.settings)return s.error="\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u043E\u0435 \u0441\u043E\u0434\u0435\u0440\u0436\u0438\u043C\u043E\u0435 \u0444\u0430\u0439\u043B\u0430.",s}catch(i){return s.error=i,s}return await X.post(`${q}/${e}`,a)}}var v=new ve;class we{constructor(){N(this,"actionTypes",[]);N(this,"workTypes",[]);N(this,"statusTypes",[]);N(this,"WORK",{});N(this,"STATUS",{});N(this,"ACTION",{});lu(this),this.fetch()}fill(e){this.actionTypes=e.actionTypes,this.workTypes=e.workTypes,this.statusTypes=e.statusTypes,this.WORK=e.WORK,this.STATUS=e.STATUS,this.ACTION=e.ACTION}async fetch(){const e=await v.fetch("api/dictonary");this.fill(e.result)}getStatus(e){return this.statusTypes.find(t=>t.id===e)}}const g=new we;class De{constructor(){N(this,"settingList",[]);N(this,"SETTING",{});N(this,"serverTime","");lu(this)}setServerTime(e){this.serverTime=au(e,"dd-MM-yyyy - HH:mm")}fill(e){this.settingList=e}fillSETTING(e){this.SETTING=e}async fetch(){const e=await v.fetch("api/settings");this.fill(e.settings.result),this.fillSETTING(e.SETTING),await v.fetch("api/settings/serverTime")}async update(e){await v.update("api/settings",e);const t=[...this.settingList],s=t.findIndex(a=>a.id===e.id);t[s]=C({},e),this.fill(t)}async updateServer(){setTimeout(()=>{window.close()},2e3),await v.fetch("api/settings/updateServer")}async backup(){await v.backup("api/settings/backup")}async repair(){setTimeout(()=>{window.close()},2e3),await v.repair("api/settings/repair")}async restore(e){return setTimeout(()=>{window.close()},2e3),await v.restore("api/settings/restore",e)}async shutdown(){setTimeout(()=>{window.close()},2e3),await v.fetch("api/settings/shutdown")}async calibrateAzimuth(e){return await v.fetch(`api/works/calibrateAzimuth?time=${e}`)}async calibrateSlope(e){return await v.fetch(`api/works/calibrateSlope?time=${e}`)}}const T=new De;class ke{constructor(){N(this,"taskList",[]);lu(this)}fill(e){this.taskList=e}async fetch(){const e=await v.fetch("api/tasks");this.fill(e.result)}async fetchById(e){return(await v.fetchById("api/tasks",e)).result}async remove(e){const t=await v.remove("api/tasks",e.id),s=this.taskList.filter(a=>a.id!==e.id);return this.fill(s),t.result}async create(e){const s=(await v.create("api/tasks",e)).result;this.fill([...this.taskList,s])}async update(e){const t=await v.update("api/tasks",e);let s=this.taskList.findIndex(a=>a.id===e.id);return this.taskList[s]=C({},e),t.result}}const G=new ke;class Ae{constructor(){N(this,"workList",[]);N(this,"currentWork",null);lu(this)}fill(e){this.workList=e}fillCurrentWork(e){e.length>0?this.currentWork=e[0]:this.currentWork=null}async fetch(){const e=await v.fetch("api/works");this.fill(e.result)}async fetchCurrentWork(){const e=await v.fetch("api/works/currentWork");this.fillCurrentWork(e.result)}async create(e){const s=(await v.create("api/works",e)).result;this.fill([...this.workList,s])}async stopCurrent(){return await v.fetch("api/works/stopCurrent")}async remove(e){const t=await v.remove("api/works",e.id),s=this.workList.filter(a=>a.id!==e.id);return this.fill(s),t.result}}const k=new Ae,Be=()=>{var i;o.exports.useEffect(()=>{k.fetchCurrentWork()},[]);const n=V(),e=o.exports.useCallback(()=>{n("/works/current-work")},[]),t=o.exports.useCallback(()=>{k.stopCurrent()},[]);let s=[];const a=(i=k.currentWork)==null?void 0:i.work;return a&&(s=a.details.filter(l=>l.status.id===g.STATUS.STATUS_RUN).map(l=>u(j,{children:l.type.name},l.id))),r(D,{children:[r(p,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",p:1,bgcolor:"#cdcdcd"},children:[u(d,{variant:"span",children:"\u0422\u0435\u043A\u0443\u0449\u0435\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435"}),s.length===0&&u(d,{variant:"span",children:"\u043E\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442"}),s.length!==0&&u(M,{children:s})]}),r(p,{sx:{display:"flex",bgcolor:"#cdcdcd"},children:[u(f,{variant:"contained",color:"primary",onClick:e,sx:{m:1},children:"\u041F\u043E\u0434\u0440\u043E\u0431\u043D\u0435\u0435"}),u(f,{variant:"contained",color:"primary",onClick:t,sx:{m:1},children:"\u041E\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u044C"})]})]})};var We=$(Be);const Ie=()=>{const n=k.workList.filter(e=>e.status.id===g.STATUS.STATUS_RUN).map(e=>u(j,{children:e.item.name},e.id));return r(p,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",bgcolor:"#cdcdcd",p:1,mb:2},children:[u(d,{variant:"span",children:"\u0422\u0435\u043A\u0443\u0449\u0430\u044F \u0437\u0430\u0434\u0430\u0447\u0430 "}),n.length===0&&u(d,{variant:"span",children:"\u043E\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442"}),n.length!==0&&u(M,{children:n})]})};var Fe=$(Ie);const $e=()=>{const n=k.workList.filter(e=>e.status.id===g.STATUS.STATUS_WAIT).map(e=>{const t=au(e.startTime,"dd-MM-yyyy - HH:mm");return r(j,{sx:{flexWrap:"wrap",justifyContent:"space-between"},children:[u(p,{variant:"div",sx:{width:"70%"},children:e.item.name}),u(p,{variant:"div",sx:{color:"blue"},children:t})]},e.id)});return r(p,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",bgcolor:"#cdcdcd",p:1,my:2,flexWrap:"wrap"},children:[u(d,{variant:"span",children:"\u0417\u0430\u043F\u043B\u0430\u043D\u0438\u0440\u043E\u0432\u0430\u043D\u043D\u044B\u0435"}),n.length===0&&u(d,{variant:"span",children:"\u043E\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044E\u0442"}),n.length!==0&&u(M,{sx:{width:"100%"},children:n})]})};var Oe=$($e);const Re=()=>(o.exports.useEffect(()=>{k.fetch()},[]),r(p,{sx:{borderWidth:"1px",borderStyle:"solid",borderColor:"black",borderRadius:"5px",minHeight:"98%",p:.5,m:.5},children:[u(d,{children:"\u0418\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044F \u043E \u0437\u0430\u0434\u0430\u043D\u0438\u044F\u0445"}),u(Oe,{}),u(Fe,{}),u(We,{})]})),eu=n=>{const{open:e,onCloseDialog:t,children:s}=n;return u(wu,{open:e,onClose:t,sx:{"& .MuiPaper-root":{width:{xs:"98%",sm:"50%"}}},children:s})},Ne=({setting:n,onCancel:e,onSubmit:t})=>{const[s,a]=o.exports.useState(C({},n)),i=c=>{let y=c.target.value;s.id!==T.SETTING.SETTING_CURRENT_SLOPE&&(y=y.replace(/-/g,"")),a(I(C({},s),{value:y}))},l=()=>{const c=C({},s);return c.value=Number((+c.value).toFixed(3)),C({},c)};return r(D,{children:[u(Q,{children:u(d,{children:"\u0417\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u043F\u0430\u0440\u0430\u043C\u0435\u0442\u0440\u0430"})}),u(Y,{children:u(p,{sx:{display:"flex",flexDirection:"column"},children:u(su,{children:u(Z,{autoFocus:!0,sx:{m:1},label:"\u0417\u043D\u0430\u0447\u0435\u043D\u0438\u0435",type:"number",inputProps:{max:350,min:0,step:.1},value:s.value,onChange:i,InputLabelProps:{shrink:!0}})})})}),r(uu,{children:[u(f,{onClick:e,children:"\u041E\u0442\u043C\u0435\u043D\u0430"}),u(f,{onClick:()=>t(l()),children:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C"})]})]})};var Le=$(Ne);const Ou=({setting:n,onEdit:e,editable:t=!0})=>{const[s,a]=o.exports.useState(!1),i=()=>{a(!0)},l=()=>{a(!1)},c=y=>{e(C({},y)),l()};return r(D,{children:[r(j,{sx:{justifyContent:"space-between",wordWrap:"wrap",bgcolor:"#f9f9f9"},children:[u(d,{sx:{width:"40%"},children:n.name}),r(p,{sx:{width:"60%",display:"flex",justifyContent:"space-between"},children:[u(d,{sx:{width:"50%",display:"flex",justifyContent:"center",fontSize:"1.5rem",color:"blue"},children:n.value}),t&&u(f,{onClick:i,children:"\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C"})]})]},n.id),u(eu,{open:s,onCloseDialog:l,children:u(Le,{onCancel:l,onSubmit:c,setting:n})})]})},Ue=()=>{o.exports.useEffect(()=>{T.fetch()},[]);const n=T.settingList?T.settingList.filter(e=>e.id!==T.SETTING.SETTING_AZIMUTH_SPEED&&e.id!==T.SETTING.SETTING_SLOPE_SPEED).map(e=>u(Ou,{setting:e,editable:!1},e.id)):null;return r(p,{sx:{borderWidth:"1px",borderStyle:"solid",borderColor:"black",borderRadius:"5px",minHeight:"98%",p:.5,m:.5},children:[u(d,{children:"\u0418\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044F \u043E\u0431 \u0443\u0441\u0442\u0440\u043E\u0439\u0441\u0442\u0432\u0435"}),r(p,{sx:{display:"flex",justifyContent:"space-between",px:2,mt:2,color:"blue"},children:[u(d,{variant:"div",children:"\u0412\u0440\u0435\u043C\u044F \u0441\u0435\u0440\u0432\u0435\u0440\u0430"}),u(d,{variant:"div",children:T.serverTime})]}),u(M,{sx:{mb:2},children:n})]})};var Me=$(Ue);const Ru=()=>r(D,{children:[u(d,{sx:{color:"red",border:"2px solid red",borderRadius:1,fontWeight:"bold",width:"80%",m:"10px auto",p:1},children:"\u0412\u041D\u0418\u041C\u0410\u041D\u0418\u0415!!! \u041F\u0435\u0440\u0435\u0434 \u0440\u0430\u0431\u043E\u0442\u043E\u0439 \u043F\u0440\u043E\u0432\u0435\u0440\u044C\u0442\u0435 \u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u043E\u0432\u0442\u044C \u0432\u044B\u0441\u0442\u0430\u0432\u043B\u0435\u043D\u043D\u043E\u0433\u043E \u0430\u0437\u0438\u043C\u0443\u0442\u0430 \u0438 \u043D\u0430\u043A\u043B\u043E\u043D\u0430!!!"}),r(p,{sx:{bgcolor:"#f9f9f9",p:1,minHeight:"85%",display:"flex",flexWrap:"wrap",justifyContent:"center"},children:[u(p,{sx:{padding:1,width:{xs:"100%",sm:"45%"},minHeight:"95%"},children:u(Re,{})}),u(p,{sx:{padding:1,width:{xs:"100%",sm:"45%"},minHeight:"95%"},children:u(Me,{})})]})]}),_e=()=>u(D,{children:u(fu,{})}),Pe=()=>u(D,{children:u(fu,{})}),je=({task:n,onSubmit:e,onCancel:t})=>{const s=o.exports.useMemo(()=>g.workTypes.find(h=>h.id===g.WORK.WORK_PROGRAMM),[]),a=o.exports.useMemo(()=>g.statusTypes.find(h=>h.id===g.STATUS.STATUS_RUN),[]),i=o.exports.useMemo(()=>({type:s,status:a,item:n,startTime:null,details:[]}),[]),[l,c]=o.exports.useState(i),[y,x]=o.exports.useState(a),[E,A]=o.exports.useState(au(new Date,"yyyy-MM-dd'T'HH:mm",{locale:Cu})),F=h=>{const B=au(h,"yyyy-MM-dd'T'HH:mm",{locale:Cu}),w=Au(Bu(B));A(B),c(I(C({},l),{startTime:w}))},m=h=>{const B=h.target.value;let w=null;x(B),B.id===g.STATUS.STATUS_WAIT&&(w=Au(Bu(E))),c(I(C({},l),{status:B,startTime:w}))},S=o.exports.useMemo(()=>g.statusTypes.map(h=>(h.id===g.STATUS.STATUS_RUN||h.id===g.STATUS.STATUS_WAIT)&&u(Du,{value:h,children:h.name},h.id)),[]);return r(D,{children:[u(Q,{children:u(d,{children:"\u0417\u0430\u0434\u0430\u043D\u0438\u0435"})}),u(Y,{children:r(p,{sx:{display:"flex",flexDirection:"column"},children:[u(su,{fullWidth:!0,sx:Ge.gutters,children:u(ku,{autoFocus:!0,value:y,onChange:m,children:S})}),y.id===g.STATUS.STATUS_WAIT&&u(su,{children:u(Qu,{value:E,onChange:F,renderInput:h=>u(Z,C({},h))})})]})}),r(uu,{children:[u(f,{onClick:t,children:"\u041E\u0442\u043C\u0435\u043D\u0430"}),u(f,{onClick:()=>e(l),children:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C"})]})]})},Ge={gutters:{my:1}};var He=$(je);const ze=({task:n,onSelect:e,onRemove:t})=>{const[s,a]=o.exports.useState(!1),i=V(),l=()=>{a(!0)},c=()=>{a(!1)},y=async x=>{await k.create(x),a(!1),x.status.id===g.STATUS.STATUS_RUN&&i("/works/current-work")};return r(D,{children:[r(j,{sx:{color:"text.primary",mb:.5,p:.2,width:"auto"},children:[r(p,{sx:{display:"flex",bgcolor:"#ffffff",width:"80%",border:"1px solid #001e3c",borderRadius:"2px",cursor:"pointer",flexWrap:"wrap","&:hover":{bgcolor:"#f1f1f1",color:"text.secondary"},alignItems:"center"},onClick:()=>e(n.id),children:[u(d,{variant:"p",component:"span",sx:{width:{xs:"100%",sm:"40%"},padding:1},children:n.name}),u(d,{variant:"p",component:"span",sx:{padding:1,fontSize:"caption.fontSize"},children:n.description})]}),r(p,{sx:{display:"flex",flexWrap:{xs:"wrap",sm:"nowrap"},flexGrow:1,justifyContent:"center",ml:1},children:[u(f,{variant:"outlined",size:"small",sx:{mr:{xs:0,sm:.5},mb:{xs:.5,sm:0}},onClick:l,children:"\u0437\u0430\u043F\u0443\u0441\u043A"}),u(f,{variant:"outlined",size:"small",onClick:()=>t(n),children:"\u0443\u0434\u0430\u043B\u0438\u0442\u044C"})]})]}),u(eu,{open:s,onCloseDialog:c,children:u(He,{onCancel:c,onSubmit:y,task:n})})]})};var Ke=$(ze);const gu=({open:n,children:e,onOk:t,onCancel:s})=>u(p,{sx:{display:"flex",justifyContent:"space-between",width:"80%",flexWrap:"wrap"},children:r(wu,{open:n,onClose:s,children:[u(Q,{}),u(Y,{children:e}),r(uu,{children:[u(f,{onClick:s,children:"\u041E\u0442\u043C\u0435\u043D\u0430"}),u(f,{onClick:t,children:"Ok"})]})]})}),Ve=n=>{const[e,t]=o.exports.useState(!1),[s,a]=o.exports.useState("");return[e,s,l=>{t(l),a(l?n:"")}]},Nu=({open:n,onAddTask:e,onCloseDialog:t,task:s})=>{const[a,i,l]=Ve("\u0418\u043C\u044F \u043D\u0435 \u043C\u043E\u0436\u0435\u0442 \u0431\u044B\u0442\u044C \u043F\u0443\u0441\u0442\u044B\u043C."),[c,y]=o.exports.useState("\u041D\u043E\u0432\u0430\u044F \u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u0430"),[x,E]=o.exports.useState(""),[A,F]=o.exports.useState(""),m=B=>{F(B.target.value)},S=B=>{const w=B.target.value;l(!w),E(B.target.value)},h=()=>{if(!x){l(!0);return}e({name:x,description:A})};return o.exports.useEffect(()=>{n&&(s?(E(s.name),F(s.description),y("\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C \u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u0443")):(E(""),F("")),l(!1))},[n]),r(D,{children:[u(Q,{children:u(d,{children:c})}),u(Y,{children:r(p,{sx:{display:"flex",flexDirection:"column"},children:[u(Z,{autoFocus:!0,error:a,label:"\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435",value:x,helperText:i,variant:"filled",onChange:S,sx:{mb:1}}),u(Z,{label:"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435",value:A,variant:"filled",multiline:!0,maxRows:4,onChange:m})]})}),r(uu,{children:[u(f,{onClick:t,children:"\u041E\u0442\u043C\u0435\u043D\u0430"}),u(f,{onClick:h,children:s?"\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C":"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C"})]})]})},Xe=()=>{const n=V(),[e,t]=o.exports.useState(!1),[s,a]=o.exports.useState(!1),[i,l]=o.exports.useState(null),c=o.exports.useCallback(h=>{n(`/tasks/${h}`)},[]);o.exports.useEffect(()=>G.fetch(),[]);const y=o.exports.useCallback(()=>{t(!1)},[]),x=o.exports.useCallback(()=>{t(!0)},[]),E=h=>{l(h),a(!0)},A=()=>{i&&G.remove(i).then(()=>{l(null)}),a(!1)},F=()=>{l(null),a(!1)},m=o.exports.useCallback(h=>{G.create(I(C({},h),{actions:[]})),y()},[]),S=o.exports.useMemo(()=>G.taskList.map(h=>u(Ke,{task:h,onSelect:c,onRemove:E},h.id)),[G.taskList]);return r(p,{sx:{bgcolor:"#f9f9f9",padding:1,minHeight:"98%"},children:[r(p,{sx:{display:"flex",justifyContent:"space-between",width:"80%",flexWrap:"wrap"},children:[u(d,{variant:"h5",children:"\u0421\u043F\u0438\u0441\u043E\u043A \u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C"}),u(f,{variant:"contained",color:"primary",onClick:x,children:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C"})]}),u(M,{children:S}),u(eu,{open:e,onCloseDialog:y,children:u(Nu,{open:e,onAddTask:m,onCloseDialog:y})}),r(gu,{open:s,onOk:A,onCancel:F,children:[u(d,{sx:{mb:2},children:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0432\u044B\u0431\u0440\u0430\u043D\u043D\u0443\u044E \u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u0443?"}),u(d,{align:"center",sx:{fontWeight:"bold"},children:i==null?void 0:i.name})]})]})};var Ze=$(Xe);const Lu=(n,e="#f1f1f1")=>o.exports.useMemo(()=>{switch(n.id){case g.STATUS.STATUS_RUN:return"#ffffe6";case g.STATUS.STATUS_DONE:return"#e8ffe6";case g.STATUS.STATUS_EXPIRED:case g.STATUS.STATUS_STOPPED:return"#ffe6e7";default:return e}},[n]),qe=({work:n,onRemove:e})=>{const t=Lu(n.status),s=n.startTime?au(n.startTime,"dd-MM-yyyy - HH:mm"):null,a=V(),i=n.status.id===g.STATUS.STATUS_RUN?"pointer":"default";return r(j,{sx:{color:"text.primary",mb:.5,p:.2,width:"auto"},children:[r(p,{sx:{display:"flex",width:"80%",border:"1px solid #001e3c",borderRadius:"2px",cursor:()=>i,flexWrap:"wrap",bgcolor:t},onClick:()=>{n.status.id===g.STATUS.STATUS_RUN&&a("/works/current-work")},children:[u(d,{variant:"p",component:"span",sx:{width:{xs:"100%",sm:"20%"},padding:1},children:n.status.name}),u(d,{variant:"p",component:"span",sx:{width:{xs:"100%",sm:"40%"},padding:1},children:n.item.name}),r(d,{variant:"p",component:"span",sx:{width:{xs:"100%",sm:"20%"},padding:1},children:[!!s&&s,!s&&"\u043D\u0435\u043C\u0435\u0434\u043B\u0435\u043D\u043D\u043E"]})]}),u(p,{sx:{display:"flex",flexWrap:{xs:"wrap",sm:"nowrap"},flexGrow:1,justifyContent:"center",ml:1},children:u(f,{variant:"outlined",size:"small",onClick:()=>e(n),children:"\u0443\u0434\u0430\u043B\u0438\u0442\u044C"})})]})};var Je=$(qe);const Qe=()=>{var y,x;V();const[n,e]=o.exports.useState(!1),[t,s]=o.exports.useState(null);o.exports.useEffect(()=>k.fetch(),[]);const a=E=>{s(E),e(!0)},i=()=>{t&&k.remove(t).then(()=>{s(null)}),e(!1)},l=()=>{s(null),e(!1)},c=o.exports.useMemo(()=>k.workList.map(E=>u(Je,{work:E,onRemove:a},E.id)),[k.workList]);return r(p,{sx:{bgcolor:"#f9f9f9",padding:1,minHeight:"98%"},children:[u(p,{sx:{display:"flex",justifyContent:"space-between",width:"80%",flexWrap:"wrap"},children:u(d,{variant:"h5",children:"\u0421\u043F\u0438\u0441\u043E\u043A \u0443\u0441\u0442\u0430\u043D\u043E\u0432\u043B\u0435\u043D\u043D\u044B\u0445 \u0437\u0430\u0434\u0430\u0447"})}),u(M,{children:c}),r(gu,{open:n,onOk:i,onCancel:l,children:[u(d,{sx:{mb:2},children:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0432\u044B\u0431\u0440\u0430\u043D\u043D\u0443\u044E \u0437\u0430\u0434\u0430\u0447\u0443?"}),r(d,{align:"center",sx:{fontWeight:"bold"},children:[(y=t==null?void 0:t.status)==null?void 0:y.name," ",(x=t==null?void 0:t.item)==null?void 0:x.name]})]})]})};var Ye=$(Qe);const u4=({work:n})=>{const e=Lu(n.status);let t="";switch(n.type.id){case g.ACTION.ACTION_AZIMUTH:case g.ACTION.ACTION_SLOPE:t=n.value1+" \u0433\u0440\u0430\u0434.";break;case g.ACTION.ACTION_WAIT:t=n.value1+" \u0441\u0435\u043A.";break;case g.ACTION.ACTION_SPARK:t=n.value2+" \u0441\u0435\u043A.";break}return u(D,{children:r(j,{sx:{justifyContent:"space-between",flexWrap:"wrap",bgcolor:e,mb:1},children:[u(d,{sx:{width:{xs:"100%",sm:"15%",md:"15%"},fontWeight:"bold"},children:n.type.name}),u(d,{sx:{width:{xs:"100%",sm:"15%",md:"15%"},textAlign:{xs:"left",sm:"center"}},children:t})," ",u(d,{sx:{width:{xs:"100%",sm:"20%"},textAlign:{xs:"left",sm:"right"},fontWeight:"bold"},children:n.status.name})]},n.id)})},e4=()=>{var s;const n=o.exports.useCallback(()=>{k.stopCurrent()},[]);o.exports.useEffect(()=>{k.fetchCurrentWork()},[]);let e=null;const t=(s=k.currentWork)==null?void 0:s.work;return t&&(e=t.details.map(a=>u(u4,{work:a},a.id))),r(D,{children:[r(p,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",bgcolor:"#cdcdcd",px:1},children:[u(d,{variant:"h6",children:"\u0422\u0435\u043A\u0443\u0449\u0430\u044F \u0437\u0430\u0434\u0430\u0447\u0430"}),u(p,{children:u(f,{variant:"contained",color:"primary",onClick:n,sx:{m:1},children:"\u041E\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u044C"})})]}),!e&&u(p,{sx:{my:10,fontWeight:"bold",display:"flex",width:"100%",justifyContent:"center",alignItems:"center"},children:"\u041D\u0435\u0442 \u0442\u0435\u043A\u0443\u0449\u0435\u0439 \u0437\u0430\u0434\u0430\u0447\u0438"}),u(M,{children:e})]})};var t4=$(e4);const n4=i=>{var l=i,{action:n,onRemove:e,onEdit:t,innerRef:s}=l,a=Tu(l,["action","onRemove","onEdit","innerRef"]);return r(j,I(C({ref:s},a),{sx:{color:"text.primary",mb:.5,p:.2,width:"auto"},children:[r(p,{sx:{display:"flex",bgcolor:"#ffffff",width:"80%",border:"1px solid #001e3c",borderRadius:"2px",flexWrap:"wrap",cursor:"pointer","&:hover":{bgcolor:"#f1f1f1",color:"text.secondary"}},onClick:()=>t(n),children:[u(d,{variant:"p",component:"span",sx:{width:{xs:"100%",sm:"40%"},padding:1},children:n.type.name}),r(d,{variant:"p",component:"span",sx:{padding:1},children:[n.type.id===1&&r(d,{children:["\u0430\u0437\u0438\u043C\u0443\u0442 ",u("span",{children:n.value1})," \u0433\u0440\u0430\u0434\u0443\u0441\u043E\u0432"]}),n.type.id===2&&r(d,{children:["\u043D\u0430\u043A\u043B\u043E\u043D ",u("span",{children:n.value1})," \u0433\u0440\u0430\u0434\u0443\u0441\u043E\u0432"]}),n.type.id===3&&r(d,{children:["\u043E\u0436\u0438\u0434\u0430\u043D\u0438\u0435 ",u("span",{children:n.value1})," \u0441\u0435\u043A"]}),n.type.id===4&&r(d,{children:["\u0440\u0430\u0437\u0440\u044F\u0434 \u043A\u043E\u043B-\u0432\u043E ",u("span",{children:n.value1})," \u0432\u0440\u0435\u043C\u044F\xA0",u("span",{children:n.value2})," \u0441\u0435\u043A \u0438\u043D\u0442\u0435\u0440\u0432\u0430\u043B\xA0",u("span",{children:n.value3})," \u0441\u0435\u043A"]})]})]}),u(p,{sx:{display:"flex",flexWrap:{xs:"wrap",sm:"nowrap"},flexGrow:1,justifyContent:"center",ml:1},children:u(f,{variant:"outlined",size:"small",onClick:()=>e(n),children:"\u0443\u0434\u0430\u043B\u0438\u0442\u044C"})})]}))};var s4=$(n4);const r4=({action:n,onSubmit:e,onCloseDialog:t})=>{const s=o.exports.useMemo(()=>({id:g.actionTypes[0].id,name:g.actionTypes[0].name}),[]),a=o.exports.useMemo(()=>({id:null,type:s,value1:0,value2:0,value3:0}),[]),[i,l]=o.exports.useState(n||a),[c,y]=o.exports.useState(()=>g.actionTypes.find(m=>m.id===i.type.id)),x=m=>{let S=m.target.value;i.type.id!==g.ACTION.ACTION_SLOPE&&(S=S.replace(/-/g,""));let h={};switch(m.target.dataset.source){case"value1":h={value1:S};break;case"value2":h={value2:S};break;case"value3":h={value3:S};break}l(()=>C(C({},i),h))},E=m=>{const S=m.target.value;y(S),l(I(C({},i),{type:{id:S.id,name:S.name},value1:0,value2:0,value3:0}))},A=o.exports.useMemo(()=>g.actionTypes.map(m=>u(Du,{value:m,children:m.name},m.id)),[]),F=()=>{const m=C({},i);return m.value1=m.type.id===g.ACTION.ACTION_SPARK?Number(String(m.value1).split(".")[0]):Number((+m.value1).toFixed(1)),m.value2=Number((+m.value2).toFixed(1)),m.value3=Number((+m.value3).toFixed(1)),C({},m)};return r(D,{children:[u(Q,{children:u(d,{children:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0435"})}),u(Y,{children:r(p,{sx:{display:"flex",flexDirection:"column"},children:[u(su,{fullWidth:!0,sx:du.gutters,children:u(ku,{autoFocus:!0,value:c,onChange:E,children:A})}),u(su,{fullWidth:!0,children:u(Z,{label:c.value1.label,value:i.value1,onChange:x,type:"number",inputProps:{"data-source":"value1",max:c.value1.max,min:c.value1.min,step:c.value1.step},sx:du.gutters,InputLabelProps:{shrink:!0}})}),c.id===g.ACTION.ACTION_SPARK&&u(Z,{label:c.value2.label,value:i.value2,onChange:x,type:"number",inputProps:{"data-source":"value2",max:c.value2.max,min:c.value2.min,step:c.value2.step},sx:du.gutters,InputLabelProps:{shrink:!0}}),c.id===g.ACTION.ACTION_SPARK&&u(Z,{label:c.value3.label,value:i.value3,onChange:x,type:"number",inputProps:{"data-source":"value3",max:c.value3.max,min:c.value3.min,step:c.value3.step},sx:du.gutters,InputLabelProps:{shrink:!0}})]})}),r(uu,{children:[u(f,{onClick:t,children:"\u041E\u0442\u043C\u0435\u043D\u0430"}),u(f,{onClick:()=>e(F()),children:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C"})]})]})},du={gutters:{my:1}};var a4=$(r4);const i4=()=>{var yu;const n=Yu(),e=V(),[t,s]=o.exports.useState(!1),[a,i]=o.exports.useState(null),[l,c]=o.exports.useState({}),[y,x]=o.exports.useState(!1),[E,A]=o.exports.useState(null),[F,m]=o.exports.useState(!1),S=o.exports.useCallback(()=>{e("/tasks")},[]);o.exports.useEffect(()=>{G.fetchById(n.id).then(b=>c(b))},[]);const h=o.exports.useCallback(()=>{s(!1)},[]),B=o.exports.useCallback(b=>{i(b),s(!0)},[]),w=o.exports.useCallback(()=>{i(null),s(!0)},[]),J=b=>{A(b),x(!0)},pu=()=>{if(E){const b=l.actions.filter(W=>E.id!==W.id),R=I(C({},l),{actions:b});c(R),G.update(R).then(()=>{A(null)})}x(!1)},O=()=>{A(null),x(!1)},L=b=>{b.id||(b.id=ne());const R=l.actions.findIndex(hu=>hu.id===b.id),W=[...l.actions];R===-1?W.push(b):W[R]=C({},b);const nu=I(C({},l),{actions:[...W]});c(nu),s(!1),G.update(nu)},U=Array.isArray(l.actions)?l.actions.map((b,R)=>u(ue,{draggableId:b.id,index:R,children:W=>u(s4,I(C(C({innerRef:W.innerRef},W.draggableProps),W.dragHandleProps),{action:b,onRemove:J,onEdit:B}))},b.id)):null,K=b=>{if(!b.destination)return;const R=P(l.actions,b.source.index,b.destination.index),W=I(C({},l),{actions:R});c(W),G.update(W)},P=o.exports.useCallback((b,R,W)=>{const nu=Array.from(b),[hu]=nu.splice(R,1);return nu.splice(W,0,hu),nu},[]),H=({name:b,description:R})=>{const W=I(C({},l),{name:b,description:R});c(W),m(!1),G.update(W)},tu=o.exports.useCallback(()=>{m(!1)},[]);return r(p,{sx:{bgcolor:"#f9f9f9",padding:1,minHeight:"98%"},children:[r(p,{sx:{display:"flex",justifyContent:"space-between",width:"80%",flexWrap:"wrap"},children:[u(d,{variant:"h5",children:"\u0421\u043E\u0441\u0442\u0430\u0432 \u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u044B"}),r(p,{children:[u(f,{variant:"contained",color:"primary",onClick:S,sx:{mr:1},children:"\u041A \u0441\u043F\u0438\u0441\u043A\u0443"}),u(f,{variant:"contained",color:"primary",onClick:w,children:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C"})]})]}),r(p,{sx:{display:"flex",justifyContent:"start"},children:[u(f,{color:"primary",onClick:()=>m(!0),sx:{mr:1},children:"\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C"}),u(d,{variant:"h6",sx:{fontStyle:"italic",color:"blue",my:1},children:`\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435: ${l.name||""}`})]}),U&&U.length<=0&&u(p,{sx:{my:10,fontWeight:"bold",display:"flex",width:"100%",justifyContent:"center",alignItems:"center"},children:"\u0421\u043F\u0438\u0441\u043E\u043A \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0439 \u043F\u0443\u0441\u0442"}),u(ee,{onDragEnd:K,children:u(te,{droppableId:"program",children:b=>r(M,I(C({className:"program",ref:b.innerRef},b.droppableProps),{children:[U,b.placeholder]}))})}),u(eu,{open:t,onCloseDialog:h,children:u(a4,{open:t,onCloseDialog:h,onSubmit:L,action:a})}),r(gu,{open:y,onOk:pu,onCancel:O,children:[u(d,{sx:{mb:2},children:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0432\u044B\u0431\u0440\u0430\u043D\u043D\u043E\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435?"}),u(d,{align:"center",sx:{fontWeight:"bold"},children:(yu=E==null?void 0:E.type)==null?void 0:yu.name})]}),u(eu,{open:F,onCloseDialog:tu,children:u(Nu,{task:l,open:F,onAddTask:H,onCloseDialog:tu})})]})};var o4=$(i4);const l4=()=>{o.exports.useEffect(()=>{T.fetch()},[]);const n=t=>{T.update(C({},t))},e=T.settingList.map(t=>{let s=!0;return t.id===T.SETTING.SETTING_VERSION&&(s=!1),u(Ou,{setting:t,onEdit:n,editable:s},t.id)});return u(D,{children:u(M,{sx:{mb:2},children:e})})};var c4=$(l4);const d4=({openDialog:n,openConfirm:e,disableAll:t})=>r(D,{children:[u(f,{disabled:t,variant:"contained",color:"primary",onClick:()=>{e("update")},sx:{mr:1,mb:1},children:"\u041E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u0435 \u0441\u0435\u0440\u0432\u0435\u0440\u0430"}),u(f,{disabled:t,variant:"contained",color:"primary",onClick:()=>{e("shutdown")},sx:{mr:1,mb:1},children:"\u0412\u044B\u043A\u043B\u044E\u0447\u0438\u0442\u044C \u0443\u0441\u0442\u0440\u043E\u0439\u0441\u0442\u0432\u043E"}),u(f,{disabled:t,variant:"contained",color:"primary",onClick:()=>{n("azimuth")},sx:{mr:1,mb:1},children:"\u041A\u0430\u043B\u0438\u0431\u0440\u043E\u0432\u043A\u0430 \u0430\u0437\u0438\u043C\u0443\u0442\u0430"}),u(f,{disabled:t,variant:"contained",color:"primary",onClick:()=>{n("slope")},sx:{mr:1,mb:1},children:"\u041A\u0430\u043B\u0438\u0431\u0440\u043E\u0432\u043A\u0430 \u043D\u0430\u043A\u043B\u043E\u043D\u0430"})]}),p4=[{description:'\u0423\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u0435 \u0443\u0441\u0442\u0440\u043E\u0439\u0441\u0442\u0432\u043E \u043D\u0430 \u0430\u0437\u0438\u043C\u0443\u0442 0 \u0438 \u043D\u0430\u0436\u043C\u0438\u0442\u0435 "\u0414\u0430\u043B\u0435\u0435".',time:0},{description:`\u041F\u043E\u0432\u043E\u0440\u043E\u0442 \u043F\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C\u044E 5 \u0441\u0435\u043A. \u041F\u043E\u0441\u043B\u0435 \u043E\u0441\u0442\u0430\u043D\u043E\u0432\u043A\u0438 \u0432\u0432\u0435\u0434\u0438\u0442\u0435
                  \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0430\u0437\u0438\u043C\u0443\u0442\u0430.`,time:5},{description:`\u041F\u043E\u0432\u043E\u0440\u043E\u0442 \u043F\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C\u044E 10 \u0441\u0435\u043A. \u041F\u043E\u0441\u043B\u0435 \u043E\u0441\u0442\u0430\u043D\u043E\u0432\u043A\u0438 \u0432\u0432\u0435\u0434\u0438\u0442\u0435
                  \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0430\u0437\u0438\u043C\u0443\u0442\u0430.`,time:10},{description:`\u041F\u043E\u0432\u043E\u0440\u043E\u0442 \u043F\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C\u044E 15 \u0441\u0435\u043A. \u041F\u043E\u0441\u043B\u0435 \u043E\u0441\u0442\u0430\u043D\u043E\u0432\u043A\u0438 \u0432\u0432\u0435\u0434\u0438\u0442\u0435
                  \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0430\u0437\u0438\u043C\u0443\u0442\u0430.`,time:15}],h4=[{description:'\u0423\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u0435 \u043D\u0430\u043A\u043B\u043E\u043D \u0443\u0441\u0442\u0440\u043E\u0439\u0441\u0442\u0432\u0430 \u043D\u0430 0 \u0438 \u043D\u0430\u0436\u043C\u0438\u0442\u0435 "\u0414\u0430\u043B\u0435\u0435".',time:0},{description:`\u041D\u0430\u043A\u043B\u043E\u043D \u043F\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C\u044E 2 \u0441\u0435\u043A. \u041F\u043E\u0441\u043B\u0435 \u043E\u0441\u0442\u0430\u043D\u043E\u0432\u043A\u0438 \u0432\u0432\u0435\u0434\u0438\u0442\u0435
                  \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0443\u0433\u043B\u0430 \u043D\u0430\u043A\u043B\u043E\u043D\u0430.`,time:2},{description:`\u041D\u0430\u043A\u043B\u043E\u043D \u043F\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C\u044E 4 \u0441\u0435\u043A. \u041F\u043E\u0441\u043B\u0435 \u043E\u0441\u0442\u0430\u043D\u043E\u0432\u043A\u0438 \u0432\u0432\u0435\u0434\u0438\u0442\u0435
                  \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0443\u0433\u043B\u0430 \u043D\u0430\u043A\u043B\u043E\u043D\u0430.`,time:4},{description:`\u041D\u0430\u043A\u043B\u043E\u043D \u043F\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C\u044E 6 \u0441\u0435\u043A. \u041F\u043E\u0441\u043B\u0435 \u043E\u0441\u0442\u0430\u043D\u043E\u0432\u043A\u0438 \u0432\u0432\u0435\u0434\u0438\u0442\u0435
                  \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0443\u0433\u043B\u0430 \u043D\u0430\u043A\u043B\u043E\u043D\u0430.`,time:6}],m4=({onCancel:n,mode:e})=>{const[t,s]=o.exports.useState(0),[a,i]=o.exports.useState(!1);let l="",c=[];switch(e){case"azimuth":l="\u041A\u0430\u043B\u0438\u0431\u0440\u043E\u0432\u043A\u0430 \u0430\u0437\u0438\u043C\u0443\u0442\u0430",c=p4;break;case"slope":l="\u041A\u0430\u043B\u0438\u0431\u0440\u043E\u0432\u043A\u0430 \u043D\u0430\u043A\u043B\u043E\u043D\u0430",c=h4;break}const y=c.length,[x,E]=o.exports.useState(new Array(y).fill(0)),[A,F]=o.exports.useState(new Array(y).fill(0)),m=(O,L=3)=>Number(O.toFixed(L)),S=()=>{k.stopCurrent(),i(!0);const O=c[t].time;let L=()=>{};switch(e){case"azimuth":L=T.calibrateAzimuth;break;case"slope":L=T.calibrateSlope;break}L(O)},h=()=>{k.stopCurrent(),n()},B=O=>{const L=+O.target.value,U=[...x],K=[...A];U[t]=L;let P=m((L-U[t-1])/c[t].time);P=P<=0?0:P,K[t]=P,E(U),F(K)},w=()=>{k.stopCurrent();const O=[0];for(let H=1;H<c.length;H++){const tu=m((x[H]-x[H-1])/c[H].time);O.push(tu)}const L=O.reduce((H,tu)=>H+tu),U=m(L/(c.length-1));let K={},P={};switch(e){case"azimuth":K=I(C({},T.settingList[0]),{value:U}),P=I(C({},T.settingList[2]),{value:x[x.length-1]});break;case"slope":K=I(C({},T.settingList[1]),{value:U}),P=I(C({},T.settingList[3]),{value:x[x.length-1]});break}U>0&&(T.update(K),T.update(P)),n()},J=()=>{s(O=>O+1),i(!1)},pu=()=>{s(O=>O-1),i(!1)};return r(D,{children:[u(Q,{children:u(d,{children:l})}),u(Y,{children:r(p,{sx:{display:"flex",flexDirection:"column"},children:[u(p,{sx:{p:2},children:c[t].description}),t!==0&&r(su,{children:[u(f,{onClick:S,variant:"contained",color:"primary",disabled:a,sx:{width:{md:"50%",xl:"25%"},mb:1,ml:1},children:"\u0421\u0442\u0430\u0440\u0442"}),u(Z,{sx:{m:1},label:"\u0417\u043D\u0430\u0447\u0435\u043D\u0438\u0435",type:"number",inputProps:{max:350,min:0,step:.1},value:x[t],onChange:B,InputLabelProps:{shrink:!0}}),r(d,{sx:{mx:1},children:["\u0421\u043A\u043E\u0440\u043E\u0441\u0442\u044C: ",A[t]]})]}),u(se,{sx:{justifySelf:"flex-end"},variant:"text",steps:y,position:"static",activeStep:t,nextButton:r(f,{size:"small",onClick:J,disabled:t===y-1,children:["\u0414\u0430\u043B\u0435\u0435",u(re,{})]}),backButton:r(f,{size:"small",onClick:pu,disabled:t===0,children:[u(ae,{}),"\u041D\u0430\u0437\u0430\u0434"]})})]})}),r(uu,{children:[u(f,{onClick:h,children:"\u041E\u0442\u043C\u0435\u043D\u0430"}),u(f,{onClick:w,children:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C"})]})]})},f4=({disableAll:n})=>{const e=o.exports.useRef();return u(D,{children:r(p,{sx:{display:"flex",width:"100%",flexWrap:"wrap"},children:[u(f,{disabled:n,variant:"contained",color:"primary",onClick:()=>{T.backup()},sx:{mr:1,mb:1},children:"\u0420\u0435\u0437\u0435\u0440\u0432\u043D\u0430\u044F \u043A\u043E\u043F\u0438\u044F \u0411\u0414"}),u(p,{children:r("label",{htmlFor:"upload",children:[u("input",{ref:e,style:{display:"none"},id:"upload",name:"upload",type:"file",onInput:a=>{var i=new FileReader;i.readAsText(a.target.files[0]),i.onloadend=function(l){T.restore(l.target.result).then(c=>{console.log(c)})}}}),u(f,{disabled:n,variant:"contained",color:"primary",component:"span",sx:{mr:1,mb:1},children:"\u0412\u043E\u0441\u0441\u0442\u0430\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u0435 \u0411\u0414"})]})})]})})},x4=()=>{const[n,e]=o.exports.useState(!1),[t,s]=o.exports.useState(!1),[a,i]=o.exports.useState("azimuth"),[l,c]=o.exports.useState(""),[y,x]=o.exports.useState(""),[E,A]=o.exports.useState(!1),F=w=>{i(w),e(!0)},m=w=>{c(w);let J="";switch(w){case"update":J=`\u041E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u0435 \u0437\u0430\u0439\u043C\u0435\u0442 3-5 \u043C\u0438\u043D\u0443\u0442.
                   \u0412 \u044D\u0442\u043E \u0432\u0440\u0435\u043C\u044F \u0441\u0435\u0440\u0432\u0435\u0440 \u0431\u0443\u0434\u0435\u0442 \u043D\u0435\u0434\u043E\u0441\u0442\u0443\u043F\u0435\u043D.
                   \u041D\u0435 \u043E\u0442\u043A\u043B\u044E\u0447\u0430\u0439\u0442\u0435 \u0443\u0441\u0442\u0440\u043E\u0439\u0441\u0442\u0432\u043E \u043E\u0442 \u043F\u0438\u0442\u0430\u043D\u0438\u044F.

                   \u041F\u0440\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u044C?
        `;break;case"shutdown":J=`\u0412\u044B\u043A\u043B\u044E\u0447\u0438\u0442\u044C \u0441\u0435\u0440\u0432\u0435\u0440?
        `;break}x(()=>J),s(!0),A(!0)},S=()=>{let w=()=>{};switch(l){case"update":w=T.updateServer;break;case"shutdown":w=T.shutdown;break}w(),s(!1)},h=()=>{e(!1)},B=()=>{s(!1),A(!1)};return r(D,{children:[u(d,{variant:"h6",children:"\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438"}),u(c4,{}),u(d4,{openDialog:F,openConfirm:m,disableAll:E}),u(f4,{disableAll:E}),u(eu,{open:n,onCloseDialog:h,children:u(m4,{onCancel:h,mode:a})}),r(eu,{open:t,onCloseDialog:B,children:[u(Q,{children:u(d,{children:"\u041F\u043E\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043D\u0438\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044F"})}),u(Y,{children:y}),r(uu,{children:[u(f,{onClick:B,children:"\u041E\u0442\u043C\u0435\u043D\u0430"}),u(f,{onClick:S,children:"Ok"})]})]})]})},C4=()=>r(D,{children:[u(d,{sx:{color:"red",border:"2px solid red",borderRadius:1,fontWeight:"bold",width:"80%",m:"10px auto",p:1},children:"\u0420\u0435\u043C\u043E\u043D\u0442"}),u(p,{sx:{bgcolor:"#f9f9f9",p:1,display:"flex",flexWrap:"wrap",justifyContent:"center"},children:u(f,{variant:"contained",color:"primary",onClick:()=>{T.repair()},children:"\u0421\u0442\u0430\u0440\u0442"})})]});var g4=$(C4);const z="/",y4=({routes:n})=>u(D,{children:u(ie,{children:u(Se,{children:u(oe,{children:r(_,{path:`${z}`,element:u(ye,{}),children:[u(_,{path:`${z}`,element:u(Ru,{})}),u(_,{path:`${z}remont`,element:u(g4,{})}),r(_,{path:`${z}tasks`,element:u(_e,{}),children:[u(_,{path:`${z}tasks`,element:u(Ze,{})}),u(_,{path:`${z}tasks:id`,element:u(o4,{})})]}),r(_,{path:`${z}works`,element:u(Pe,{}),children:[u(_,{path:`${z}works`,element:u(Ye,{})}),u(_,{path:"/works/current-work",element:u(t4,{})})]}),u(_,{path:`${z}settings`,element:u(x4,{})}),u(_,{path:"*",element:u(Ru,{})})]})})})})});const iu=le(`ws://${location.hostname}`);iu.on("connect",()=>{console.log("socket ",iu.connected)});iu.on("workStatusUpdate",n=>{k.fetch(),k.fetchCurrentWork()});iu.on("serverTime",n=>{T.setServerTime(+n)});iu.on("settingsUpdate",n=>{T.fetch()});const b4=ce({palette:{primary:{main:"#1976d2"},bgGray:{main:"#f9f9f9"}}},de);pe.render(u(he.StrictMode,{children:u(me,{theme:b4,children:u(fe,{dateAdapter:xe,locale:Cu,children:u(y4,{})})})}),document.getElementById("root"));
